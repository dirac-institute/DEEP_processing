description: |
  The DRP pipeline specialized for the DECam instrument, developed against the
  Merian dataset.
instrument: lsst.obs.decam.DarkEnergyCamera
parameters:
  band: i
tasks:
  inject_visit:
    class: lsst.source.injection.inject_visit.VisitInjectTask
    config:
    - external_psf: true
      external_photo_calib: true
      external_wcs: true
      connections.input_exposure: calexp
      connections.output_exposure: injected_calexp
      connections.output_catalog: injected_calexp_catalog
  isr:
    class: lsst.ip.isr.IsrTask
    config:
    - connections.crosstalkSources: overscanRaw
      doCrosstalk: true
  characterizeImage:
    class: lsst.pipe.tasks.characterizeImage.CharacterizeImageTask
  calibrate:
    class: lsst.pipe.tasks.calibrate.CalibrateTask
    config:
    - photoCal.match.referenceSelection.magLimit.fluxField: i_flux
      photoCal.match.referenceSelection.magLimit.maximum: 22.0
  transformSourceTable:
    class: lsst.pipe.tasks.postprocess.TransformSourceTableTask
    config:
    - connections.inputCatalog: injected_source
      connections.outputCatalog: injected_sourceTable
  consolidateSourceTable:
    class: lsst.pipe.tasks.postprocess.ConsolidateSourceTableTask
    config:
    - connections.inputCatalogs: injected_sourceTable
      connections.outputCatalog: injected_sourceTable_visit
  consolidateVisitSummary:
    class: lsst.pipe.tasks.postprocess.ConsolidateVisitSummaryTask
    config:
    - connections.calexp: injected_calexp
      connections.visitSummarySchema: injected_visitSummary_schema
      connections.visitSummary: injected_visitSummary
  isolatedStarAssociation:
    class: lsst.pipe.tasks.isolatedStarAssociation.IsolatedStarAssociationTask
    config:
    - connections.source_table_visit: preSourceTable_visit
    - python: config.band_order += ["N708", "N540"]
      connections.source_table_visit: preSourceTable_visit
  finalizeCharacterization:
    class: lsst.pipe.tasks.finalizeCharacterization.FinalizeCharacterizationTask
    config:
    - connections.calexps: injected_calexp
      connections.finalized_src_table: injected_finalized_src_table
      connections.finalized_psf_ap_corr_cat: injected_finalized_psf_ap_corr_catalog
  updateVisitSummary:
    class: lsst.drp.tasks.update_visit_summary.UpdateVisitSummaryTask
    config:
    - wcs_provider: tract
      photo_calib_provider: global
      background_provider: replacement
    - photo_calib_provider: tract
      background_provider: input_summary
      connections.photoCalibName: jointcal
      connections.skyWcsName: jointcal
      connections.input_summary_schema: injected_visitSummary_schema
      connections.ap_corr_overrides: injected_finalized_psf_ap_corr_catalog
      connections.psf_star_catalog: injected_finalized_src_table
      connections.input_summary_catalog: injected_visitSummary
      connections.psf_overrides: injected_finalized_psf_ap_corr_catalog
      connections.input_exposures: injected_calexp
      connections.output_summary_schema: injected_finalVisitSummary_schema
      connections.output_summary_catalog: injected_finalVisitSummary
  makeCcdVisitTable:
    class: lsst.pipe.tasks.postprocess.MakeCcdVisitTableTask
    config:
    - connections.visitSummaryRefs: injected_finalVisitSummary
      connections.outputCatalog: injected_ccdVisitTable
  makeVisitTable:
    class: lsst.pipe.tasks.postprocess.MakeVisitTableTask
    config:
    - connections.visitSummaries: injected_finalVisitSummary
      connections.outputCatalog: injected_visitTable
  makeWarp:
    class: lsst.pipe.tasks.makeWarp.MakeWarpTask
    config:
    - makePsfMatched: true
    - python: |
        config.warpAndPsfMatch.psfMatch.kernel['AL'].kernelSize = 29
        config.warpAndPsfMatch.psfMatch.kernel['AL'].alardSigGauss = [1.0, 2.0, 4.5]
        from lsst.pipe.tasks.selectImages import PsfWcsSelectImagesTask
        config.select.retarget(PsfWcsSelectImagesTask)
      matchingKernelSize: 29
      modelPsf.defaultFwhm: 7.7
      warpAndPsfMatch.warp.warpingKernelName: lanczos5
      coaddPsf.warpingKernelName: lanczos5
      doWriteEmptyWarps: true
    - connections.calExpList: injected_calexp
      connections.visitSummary: injected_finalVisitSummary
      connections.direct: injected_deepCoadd_directWarp
      connections.psfMatched: injected_deepCoadd_psfMatchedWarp
  selectDeepCoaddVisits:
    class: lsst.pipe.tasks.selectImages.BestSeeingSelectVisitsTask
    config:
    - connections.goodVisits: deepCoaddVisits
      maxPsfFwhm: 2.0
      nVisitsMax: -1
      connections.visitSummaries: injected_finalVisitSummary
    - connections.goodVisits: injected_deepCoaddVisits
  assembleCoadd:
    class: lsst.drp.tasks.assemble_coadd.CompareWarpAssembleCoaddTask
    config:
    - doInputMap: true
      doSelectVisits: true
      assembleStaticSkyModel.doSelectVisits: true
      connections.selectedVisits: deepCoaddVisits
    - python: |
        config.removeMaskPlanes.append("CROSSTALK")
        config.badMaskPlanes += ["SUSPECT"]
        from lsst.pipe.tasks.selectImages import PsfWcsSelectImagesTask
        config.select.retarget(PsfWcsSelectImagesTask)
      matchingKernelSize: 29
      subregionSize: (10000, 200)
      doNImage: true
      interpImage.transpose: true
      coaddPsf.warpingKernelName: lanczos5
      assembleStaticSkyModel.subregionSize: (10000, 200)
      doFilterMorphological: true
      doAttachTransmissionCurve: false
    - connections.inputWarps: injected_deepCoadd_directWarp
      connections.selectedVisits: injected_deepCoaddVisits
      connections.psfMatchedWarps: injected_deepCoadd_psfMatchedWarp
      connections.nImage: injected_deepCoadd_nImage
      connections.coaddExposure: injected_deepCoadd
      connections.inputMap: injected_deepCoadd_inputMap
  healSparsePropertyMaps:
    class: lsst.pipe.tasks.healSparseMapping.HealSparsePropertyMapTask
    config:
    - connections.coadd_exposures: injected_deepCoadd
      connections.input_maps: injected_deepCoadd_inputMap
      connections.visit_summaries: injected_finalVisitSummary
      connections.psf_maglim_map_weighted_mean: injected_deepCoadd_psf_maglim_map_weighted_mean
      connections.dcr_e2_map_weighted_mean: injected_deepCoadd_dcr_e2_map_weighted_mean
      connections.psf_size_map_weighted_mean: injected_deepCoadd_psf_size_map_weighted_mean
      connections.epoch_map_min: injected_deepCoadd_epoch_map_min
      connections.sky_background_map_weighted_mean: injected_deepCoadd_sky_background_map_weighted_mean
      connections.psf_e1_map_weighted_mean: injected_deepCoadd_psf_e1_map_weighted_mean
      connections.dcr_dra_map_weighted_mean: injected_deepCoadd_dcr_dra_map_weighted_mean
      connections.sky_noise_map_weighted_mean: injected_deepCoadd_sky_noise_map_weighted_mean
      connections.dcr_ddec_map_weighted_mean: injected_deepCoadd_dcr_ddec_map_weighted_mean
      connections.dcr_e1_map_weighted_mean: injected_deepCoadd_dcr_e1_map_weighted_mean
      connections.epoch_map_mean: injected_deepCoadd_epoch_map_mean
      connections.exposure_time_map_sum: injected_deepCoadd_exposure_time_map_sum
      connections.psf_e2_map_weighted_mean: injected_deepCoadd_psf_e2_map_weighted_mean
      connections.epoch_map_max: injected_deepCoadd_epoch_map_max
  consolidateHealSparsePropertyMaps:
    class: lsst.pipe.tasks.healSparseMapping.ConsolidateHealSparsePropertyMapTask
    config:
    - connections.psf_maglim_map_weighted_mean: injected_deepCoadd_psf_maglim_map_weighted_mean
      connections.dcr_e2_map_weighted_mean: injected_deepCoadd_dcr_e2_map_weighted_mean
      connections.psf_size_map_weighted_mean: injected_deepCoadd_psf_size_map_weighted_mean
      connections.epoch_map_min: injected_deepCoadd_epoch_map_min
      connections.sky_background_map_weighted_mean: injected_deepCoadd_sky_background_map_weighted_mean
      connections.psf_e1_map_weighted_mean: injected_deepCoadd_psf_e1_map_weighted_mean
      connections.dcr_dra_map_weighted_mean: injected_deepCoadd_dcr_dra_map_weighted_mean
      connections.sky_noise_map_weighted_mean: injected_deepCoadd_sky_noise_map_weighted_mean
      connections.dcr_ddec_map_weighted_mean: injected_deepCoadd_dcr_ddec_map_weighted_mean
      connections.dcr_e1_map_weighted_mean: injected_deepCoadd_dcr_e1_map_weighted_mean
      connections.epoch_map_mean: injected_deepCoadd_epoch_map_mean
      connections.exposure_time_map_sum: injected_deepCoadd_exposure_time_map_sum
      connections.psf_e2_map_weighted_mean: injected_deepCoadd_psf_e2_map_weighted_mean
      connections.epoch_map_max: injected_deepCoadd_epoch_map_max
      connections.epoch_consolidated_map_min: injected_deepCoadd_epoch_consolidated_map_min
      connections.dcr_ddec_consolidated_map_weighted_mean: injected_deepCoadd_dcr_ddec_consolidated_map_weighted_mean
      connections.exposure_time_consolidated_map_sum: injected_deepCoadd_exposure_time_consolidated_map_sum
      connections.sky_background_consolidated_map_weighted_mean: injected_deepCoadd_sky_background_consolidated_map_weighted_mean
      connections.sky_noise_consolidated_map_weighted_mean: injected_deepCoadd_sky_noise_consolidated_map_weighted_mean
      connections.dcr_e1_consolidated_map_weighted_mean: injected_deepCoadd_dcr_e1_consolidated_map_weighted_mean
      connections.dcr_e2_consolidated_map_weighted_mean: injected_deepCoadd_dcr_e2_consolidated_map_weighted_mean
      connections.epoch_consolidated_map_max: injected_deepCoadd_epoch_consolidated_map_max
      connections.psf_size_consolidated_map_weighted_mean: injected_deepCoadd_psf_size_consolidated_map_weighted_mean
      connections.psf_maglim_consolidated_map_weighted_mean: injected_deepCoadd_psf_maglim_consolidated_map_weighted_mean
      connections.dcr_dra_consolidated_map_weighted_mean: injected_deepCoadd_dcr_dra_consolidated_map_weighted_mean
      connections.psf_e2_consolidated_map_weighted_mean: injected_deepCoadd_psf_e2_consolidated_map_weighted_mean
      connections.psf_e1_consolidated_map_weighted_mean: injected_deepCoadd_psf_e1_consolidated_map_weighted_mean
      connections.epoch_consolidated_map_mean: injected_deepCoadd_epoch_consolidated_map_mean
  detection:
    class: lsst.pipe.tasks.multiBand.DetectCoaddSourcesTask
    config:
    - connections.exposure: injected_deepCoadd
      connections.detectionSchema: injected_deepCoadd_det_schema
      connections.outputExposure: injected_deepCoadd_calexp
      connections.outputBackgrounds: injected_deepCoadd_calexp_background
      connections.outputSources: injected_deepCoadd_det
  mergeDetections:
    class: lsst.pipe.tasks.mergeDetections.MergeDetectionsTask
    config:
    - connections.schema: injected_deepCoadd_det_schema
      connections.catalogs: injected_deepCoadd_det
      connections.outputSchema: injected_deepCoadd_mergeDet_schema
      connections.outputPeakSchema: injected_deepCoadd_peak_schema
      connections.outputCatalog: injected_deepCoadd_mergeDet
  deblend:
    class: lsst.pipe.tasks.deblendCoaddSourcesPipeline.DeblendCoaddSourcesMultiTask
    config:
    - connections.inputSchema: injected_deepCoadd_mergeDet_schema
      connections.peakSchema: injected_deepCoadd_peak_schema
      connections.coadds: injected_deepCoadd_calexp
      connections.mergedDetections: injected_deepCoadd_mergeDet
      connections.outputSchema: injected_deepCoadd_deblendedFlux_schema
      connections.scarletModelData: injected_deepCoadd_scarletModelData
      connections.deblendedCatalog: injected_deepCoadd_deblendedCatalog
  measure:
    class: lsst.pipe.tasks.multiBand.MeasureMergedCoaddSourcesTask
    config:
    - connections.sourceTableHandles: preSourceTable_visit
      connections.inputSchema: injected_deepCoadd_deblendedFlux_schema
      connections.scarletModels: injected_deepCoadd_scarletModelData
      connections.exposure: injected_deepCoadd_calexp
      connections.scarletCatalog: injected_deepCoadd_deblendedCatalog
      connections.finalizedSourceTableHandles: injected_finalized_src_table
      connections.outputSchema: injected_deepCoadd_meas_schema
      connections.matchResult: injected_deepCoadd_measMatch
      connections.denormMatches: injected_deepCoadd_measMatchFull
      connections.outputSources: injected_deepCoadd_meas
  mergeMeasurements:
    class: lsst.pipe.tasks.mergeMeasurements.MergeMeasurementsTask
    config:
    - connections.inputSchema: injected_deepCoadd_meas_schema
      connections.catalogs: injected_deepCoadd_meas
      connections.outputSchema: injected_deepCoadd_ref_schema
      connections.mergedCatalog: injected_deepCoadd_ref
  writeObjectTable:
    class: lsst.pipe.tasks.postprocess.WriteObjectTableTask
    config:
    - connections.inputCatalogForcedSrc: injected_deepCoadd_forced_src
      connections.inputCatalogMeas: injected_deepCoadd_meas
      connections.inputCatalogRef: injected_deepCoadd_ref
      connections.outputCatalog: injected_deepCoadd_obj
  transformObjectTable:
    class: lsst.pipe.tasks.postprocess.TransformObjectCatalogTask
    config:
    - connections.inputCatalog: injected_deepCoadd_obj
      connections.outputCatalog: injected_objectTable
  consolidateObjectTable:
    class: lsst.pipe.tasks.postprocess.ConsolidateObjectTableTask
    config:
    - connections.inputCatalogs: injected_objectTable
      connections.outputCatalog: injected_objectTable_tract
  forcedPhotCcd:
    class: lsst.meas.base.forcedPhotCcd.ForcedPhotCcdTask
    config:
    - connections.inputSchema: injected_deepCoadd_ref_schema
      connections.exposure: injected_calexp
      connections.refCat: injected_deepCoadd_ref
      connections.visitSummary: injected_finalVisitSummary
      connections.outputSchema: injected_forced_src_schema
      connections.measCat: injected_forced_src
  forcedPhotCoadd:
    class: lsst.drp.tasks.forcedPhotCoadd.ForcedPhotCoaddTask
    config:
    - connections.inputSchema: injected_deepCoadd_ref_schema
      connections.scarletModels: injected_deepCoadd_scarletModelData
      connections.exposure: injected_deepCoadd_calexp
      connections.refCatInBand: injected_deepCoadd_meas
      connections.refCat: injected_deepCoadd_ref
      connections.refWcs: injected_deepCoadd.wcs
      connections.outputSchema: injected_deepCoadd_forced_src_schema
      connections.measCat: injected_deepCoadd_forced_src
  selectGoodSeeingVisits:
    class: lsst.pipe.tasks.selectImages.BestSeeingQuantileSelectVisitsTask
    config:
    - connections.goodVisits: goodSeeingVisits
      connections.visitSummaries: injected_finalVisitSummary
    - connections.goodVisits: injected_goodSeeingVisits
  templateGen:
    class: lsst.drp.tasks.assemble_coadd.CompareWarpAssembleCoaddTask
    config:
    - doSelectVisits: true
      assembleStaticSkyModel.doSelectVisits: true
      doNImage: true
      connections.selectedVisits: goodSeeingVisits
      connections.outputCoaddName: goodSeeing
      connections.coaddExposure: goodSeeingCoadd
    - python: |
        config.removeMaskPlanes.append("CROSSTALK")
        config.badMaskPlanes += ["SUSPECT"]
        from lsst.pipe.tasks.selectImages import PsfWcsSelectImagesTask
        config.select.retarget(PsfWcsSelectImagesTask)
      matchingKernelSize: 29
      subregionSize: (10000, 200)
      doNImage: true
      interpImage.transpose: true
      coaddPsf.warpingKernelName: lanczos5
      assembleStaticSkyModel.subregionSize: (10000, 200)
      doFilterMorphological: true
      doAttachTransmissionCurve: false
    - connections.inputWarps: injected_deepCoadd_directWarp
      connections.selectedVisits: injected_goodSeeingVisits
      connections.psfMatchedWarps: injected_deepCoadd_psfMatchedWarp
      connections.nImage: injected_goodSeeingCoadd_nImage
      connections.coaddExposure: injected_goodSeeingCoadd
  getTemplate:
    class: lsst.ip.diffim.getTemplate.GetTemplateTask
    config:
    - connections.coaddName: goodSeeing
      connections.coaddExposures: goodSeeingCoadd
      connections.template: goodSeeingDiff_templateExp
    - connections.coaddExposures: injected_goodSeeingCoadd
      connections.wcs: injected_calexp.wcs
      connections.bbox: injected_calexp.bbox
      connections.template: injected_goodSeeingDiff_templateExp
  subtractImages:
    class: lsst.ip.diffim.subtractImages.AlardLuptonSubtractTask
    config:
    - allowKernelSourceDetection: true
      connections.coaddName: goodSeeing
      connections.template: goodSeeingDiff_templateExp
      connections.difference: goodSeeingDiff_differenceTempExp
      connections.matchedTemplate: goodSeeingDiff_matchedExp
      connections.science: injected_calexp
    - connections.template: injected_goodSeeingDiff_templateExp
      connections.psfMatchingKernel: injected_goodSeeingDiff_psfMatchKernel
      connections.difference: injected_goodSeeingDiff_differenceTempExp
      connections.matchedTemplate: injected_goodSeeingDiff_matchedExp
  detectAndMeasureDiaSources:
    class: lsst.ip.diffim.detectAndMeasure.DetectAndMeasureTask
    config:
    - connections.coaddName: goodSeeing
      connections.matchedTemplate: goodSeeingDiff_matchedExp
      connections.difference: goodSeeingDiff_differenceTempExp
      connections.subtractedMeasuredExposure: goodSeeingDiff_differenceExp
    - connections.difference: injected_goodSeeingDiff_differenceTempExp
      connections.matchedTemplate: injected_goodSeeingDiff_matchedExp
      connections.science: injected_calexp
      connections.outputSchema: injected_goodSeeingDiff_diaSrc_schema
      connections.diaSources: injected_goodSeeingDiff_diaSrc
      connections.subtractedMeasuredExposure: injected_goodSeeingDiff_differenceExp
  transformDiaSourceCat:
    class: lsst.ap.association.TransformDiaSourceCatalogTask
    config:
    - connections.coaddName: goodSeeing
      connections.diaSourceSchema: goodSeeingDiff_diaSrc_schema
      connections.diaSourceCat: goodSeeingDiff_diaSrc
      connections.diffIm: goodSeeingDiff_differenceExp
      connections.diaSourceTable: goodSeeingDiff_diaSrcTable
    - connections.diaSourceSchema: injected_goodSeeingDiff_diaSrc_schema
      connections.diffIm: injected_goodSeeingDiff_differenceExp
      connections.diaSourceCat: injected_goodSeeingDiff_diaSrc
      connections.diaSourceTable: injected_goodSeeingDiff_diaSrcTable
  consolidateDiaSourceTable:
    class: lsst.pipe.tasks.postprocess.ConsolidateSourceTableTask
    config:
    - connections.inputCatalogs: goodSeeingDiff_diaSrcTable
      connections.outputCatalog: diaSourceTable
    - connections.inputCatalogs: injected_goodSeeingDiff_diaSrcTable
      connections.outputCatalog: injected_diaSourceTable
  drpAssociation:
    class: lsst.pipe.tasks.drpAssociationPipe.DrpAssociationPipeTask
    config:
    - connections.coaddName: goodSeeing
      connections.diaSourceTables: goodSeeingDiff_diaSrcTable
      connections.assocDiaSourceTable: goodSeeingDiff_assocDiaSrcTable
      connections.diaObjectTable: goodSeeingDiff_diaObjTable
    - connections.diaSourceTables: injected_goodSeeingDiff_diaSrcTable
      connections.assocDiaSourceTable: injected_goodSeeingDiff_assocDiaSrcTable
      connections.diaObjectTable: injected_goodSeeingDiff_diaObjTable
  drpDiaCalculation:
    class: lsst.pipe.tasks.drpDiaCalculationPipe.DrpDiaCalculationPipeTask
    config:
    - connections.coaddName: goodSeeing
      connections.assocDiaSourceTable: goodSeeingDiff_assocDiaSrcTable
      connections.diaObjectTable: goodSeeingDiff_diaObjTable
      connections.fullDiaObjectTable: goodSeeingDiff_fullDiaObjTable
    - connections.assocDiaSourceTable: injected_goodSeeingDiff_assocDiaSrcTable
      connections.diaObjectTable: injected_goodSeeingDiff_diaObjTable
      connections.fullDiaObjectTable: injected_goodSeeingDiff_fullDiaObjTable
  consolidateAssocDiaSourceTable:
    class: lsst.pipe.tasks.postprocess.ConsolidateTractTask
    config:
    - connections.inputCatalogs: goodSeeingDiff_assocDiaSrcTable
      connections.outputCatalog: diaSourceTable_tract
    - connections.inputCatalogs: injected_goodSeeingDiff_assocDiaSrcTable
      connections.outputCatalog: injected_diaSourceTable_tract
  consolidateFullDiaObjectTable:
    class: lsst.pipe.tasks.postprocess.ConsolidateTractTask
    config:
    - connections.inputCatalogs: goodSeeingDiff_fullDiaObjTable
      connections.outputCatalog: diaObjectTable_tract
    - connections.inputCatalogs: injected_goodSeeingDiff_fullDiaObjTable
      connections.outputCatalog: injected_diaObjectTable_tract
  forcedPhotDiffim:
    class: lsst.meas.base.ForcedPhotCcdTask
    config:
    - connections.measCat: forced_diff
      connections.outputSchema: forced_diff_schema
      connections.exposure: goodSeeingDiff_differenceExp
      connections.inputSchema: injected_deepCoadd_ref_schema
    - connections.exposure: injected_goodSeeingDiff_differenceExp
      connections.refCat: injected_deepCoadd_ref
      connections.visitSummary: injected_finalVisitSummary
      connections.outputSchema: injected_forced_diff_schema
      connections.measCat: injected_forced_diff
  writeForcedSourceTable:
    class: lsst.pipe.tasks.postprocess.WriteForcedSourceTableTask
    config:
    - connections.inputCatalog: injected_forced_src
      connections.inputCatalogDiff: injected_forced_diff
      connections.outputCatalog: injected_mergedForcedSource
  transformForcedSourceTable:
    class: lsst.pipe.tasks.postprocess.TransformForcedSourceTableTask
    config:
    - connections.inputCatalogs: injected_mergedForcedSource
      connections.referenceCatalog: injected_objectTable
      connections.outputCatalog: injected_forcedSourceTable
  consolidateForcedSourceTable:
    class: lsst.pipe.tasks.postprocess.ConsolidateTractTask
    config:
    - connections.inputCatalogs: forcedSourceTable
      connections.outputCatalog: forcedSourceTable_tract
    - connections.inputCatalogs: injected_forcedSourceTable
      connections.outputCatalog: injected_forcedSourceTable_tract
  forcedPhotCcdOnDiaObjects:
    class: lsst.meas.base.ForcedPhotCcdFromDataFrameTask
    config:
    - connections.exposure: injected_calexp
      connections.refCat: injected_goodSeeingDiff_fullDiaObjTable
      connections.visitSummary: injected_finalVisitSummary
      connections.outputSchema: injected_forced_src_diaObject_schema
      connections.measCat: injected_forced_src_diaObject
  forcedPhotDiffOnDiaObjects:
    class: lsst.meas.base.ForcedPhotCcdFromDataFrameTask
    config:
    - connections.measCat: forced_diff_diaObject
      connections.outputSchema: forced_diff_diaObject_schema
      connections.exposure: goodSeeingDiff_differenceExp
    - connections.exposure: injected_goodSeeingDiff_differenceExp
      connections.refCat: injected_goodSeeingDiff_fullDiaObjTable
      connections.visitSummary: injected_finalVisitSummary
      connections.outputSchema: injected_forced_diff_diaObject_schema
      connections.measCat: injected_forced_diff_diaObject
  writeForcedSourceOnDiaObjectTable:
    class: lsst.pipe.tasks.postprocess.WriteForcedSourceTableTask
    config:
    - key: diaObjectId
      connections.inputCatalogDiff: forced_diff_diaObject
      connections.inputCatalog: forced_src_diaObject
      connections.outputCatalog: mergedForcedSourceOnDiaObject
    - connections.inputCatalog: injected_forced_src_diaObject
      connections.inputCatalogDiff: injected_forced_diff_diaObject
      connections.outputCatalog: injected_mergedForcedSourceOnDiaObject
  transformForcedSourceOnDiaObjectTable:
    class: lsst.pipe.tasks.postprocess.TransformForcedSourceTableTask
    config:
    - referenceColumns: []
      keyRef: diaObjectId
      key: forcedSourceOnDiaObjectId
      connections.inputCatalogs: mergedForcedSourceOnDiaObject
      connections.outputCatalog: forcedSourceOnDiaObjectTable
      connections.referenceCatalog: goodSeeingDiff_fullDiaObjTable
    - connections.inputCatalogs: injected_mergedForcedSourceOnDiaObject
      connections.referenceCatalog: injected_goodSeeingDiff_fullDiaObjTable
      connections.outputCatalog: injected_forcedSourceOnDiaObjectTable
  consolidateForcedSourceOnDiaObjectTable:
    class: lsst.pipe.tasks.postprocess.ConsolidateTractTask
    config:
    - connections.inputCatalogs: forcedSourceOnDiaObjectTable
      connections.outputCatalog: forcedSourceOnDiaObjectTable_tract
    - connections.inputCatalogs: injected_forcedSourceOnDiaObjectTable
      connections.outputCatalog: injected_forcedSourceOnDiaObjectTable_tract
  writePreSourceTable:
    class: lsst.pipe.tasks.postprocess.WriteSourceTableTask
    config:
    - connections.outputCatalog: preSource
  transformPreSourceTable:
    class: lsst.pipe.tasks.postprocess.TransformSourceTableTask
    config:
    - connections.inputCatalog: preSource
      connections.outputCatalog: preSourceTable
  consolidatePreSourceTable:
    class: lsst.pipe.tasks.postprocess.ConsolidateSourceTableTask
    config:
    - connections.inputCatalogs: preSourceTable
      connections.outputCatalog: preSourceTable_visit
  writeRecalibratedSourceTable:
    class: lsst.pipe.tasks.postprocess.WriteRecalibratedSourceTableTask
    config:
    - connections.outputCatalog: source
      connections.visitSummary: injected_finalVisitSummary
    - connections.outputCatalog: injected_source
  makePreliminaryCcdVisitTable:
    class: lsst.pipe.tasks.postprocess.MakeCcdVisitTableTask
    config:
    - connections.visitSummaryRefs: visitSummary
      connections.outputCatalog: preCcdVisitTable
    - connections.visitSummaryRefs: injected_visitSummary
      connections.outputCatalog: injected_preCcdVisitTable
  makePreliminaryVisitTable:
    class: lsst.pipe.tasks.postprocess.MakeVisitTableTask
    config:
    - connections.visitSummaries: visitSummary
      connections.outputCatalog: preVisitTable
    - connections.visitSummaries: injected_visitSummary
      connections.outputCatalog: injected_preVisitTable
  isrForCrosstalkSources:
    class: lsst.ip.isr.IsrTask
    config:
    - connections.outputExposure: overscanRaw
      doOverscan: true
      doAssembleCcd: false
      doBias: false
      doCrosstalk: false
      doVariance: false
      doLinearize: false
      doDefect: false
      doNanMasking: false
      doDark: false
      doFlat: false
      doFringe: false
      doInterpolate: false
  plot_e1_scatter_visit:
    class: lsst.analysis.drp.scatterPlotVisit.ScatterPlotVisitTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import CalcE1
        config.axisLabels.update({"y": "E1: (i$_{xx}$ - i$_{yy}$)/(i$_{xx}$ + i$_{yy}$)"})
      axisActions.yAction: CalcE1
      axisActions.yAction.colXx: ixx
      axisActions.yAction.colYy: iyy
      connections.plotName: e1_ixx
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.scatterPlot: injected_scatterPlotVisit_e1_ixx
  plot_e1_sky_visit:
    class: lsst.analysis.drp.skyPlotVisit.SkyPlotVisitTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import CalcE1
        config.axisLabels.update({"z": "E1: (i$_{xx}$ - i$_{yy}$)/(i$_{xx}$ + i$_{yy}$)"})
      axisActions.zAction: CalcE1
      axisActions.zAction.colXx: ixx
      axisActions.zAction.colYy: iyy
      connections.plotName: e1_ixx
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.skyPlot: injected_skyPlotVisit_e1_ixx
  plot_e2_scatter_visit:
    class: lsst.analysis.drp.scatterPlotVisit.ScatterPlotVisitTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import CalcE2
        config.axisLabels.update({"y": "E2: 2i$_{xy}$/(i$_{xx}$ + i$_{yy}$)"})
      axisActions.yAction: CalcE2
      axisActions.yAction.colXx: ixx
      axisActions.yAction.colYy: iyy
      axisActions.yAction.colXy: ixy
      connections.plotName: e2_ixx
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.scatterPlot: injected_scatterPlotVisit_e2_ixx
  plot_e2_sky_visit:
    class: lsst.analysis.drp.skyPlotVisit.SkyPlotVisitTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import CalcE2
        config.axisLabels.update({"z": "E2: 2i$_{xy}$/(i$_{xx}$ + i$_{yy}$)"})
      axisActions.zAction: CalcE2
      axisActions.zAction.colXx: ixx
      axisActions.zAction.colYy: iyy
      axisActions.zAction.colXy: ixy
      connections.plotName: e2_ixx
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.skyPlot: injected_skyPlotVisit_e2_ixx
  plot_shapeSize_scatter_visit:
    class: lsst.analysis.drp.scatterPlotVisit.ScatterPlotVisitTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import CalcShapeSize
        config.axisLabels.update({"y": "Shape: (i$_{xx}$*i$_{yy}$ - i$_{xy}^2$)$^{1/4}$"})
      axisActions.yAction: CalcShapeSize
      axisActions.yAction.colXx: ixx
      axisActions.yAction.colYy: iyy
      axisActions.yAction.colXy: ixy
      connections.plotName: shape_ixx
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.scatterPlot: injected_scatterPlotVisit_shape_ixx
  plot_shapeSize_sky_visit:
    class: lsst.analysis.drp.skyPlotVisit.SkyPlotVisitTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import CalcShapeSize
        config.axisLabels.update({"z": "Shape: (i$_{xx}$*i$_{yy}$ - i$_{xy}^2$)$^{1/4}$"})
      axisActions.zAction: CalcShapeSize
      axisActions.zAction.colXx: ixx
      axisActions.zAction.colYy: iyy
      axisActions.zAction.colXy: ixy
      connections.plotName: shape_ixx
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.skyPlot: injected_skyPlotVisit_shape_ixx
  plot_e1PSF_scatter_visit:
    class: lsst.analysis.drp.scatterPlotVisit.ScatterPlotVisitTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import CalcE1
        config.axisLabels.update({"y": "E1: (i$_{xx}$PSF - i$_{yy}$PSF)/(i$_{xx}$PSF + i$_{yy}$PSF)"})
      axisActions.yAction: CalcE1
      axisActions.yAction.colXx: ixxPSF
      axisActions.yAction.colYy: iyyPSF
      connections.plotName: e1_ixxPSF
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.scatterPlot: injected_scatterPlotVisit_e1_ixxPSF
  plot_e1PSF_sky_visit:
    class: lsst.analysis.drp.skyPlotVisit.SkyPlotVisitTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import CalcE1
        config.axisLabels.update({"z": "E1: (i$_{xx}$PSF - i$_{yy}$PSF)/(i$_{xx}$PSF + i$_{yy}$PSF)"})
      axisActions.zAction: CalcE1
      axisActions.zAction.colXx: ixxPSF
      axisActions.zAction.colYy: iyyPSF
      connections.plotName: e1_ixxPSF
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.skyPlot: injected_skyPlotVisit_e1_ixxPSF
  plot_e2PSF_sky_visit:
    class: lsst.analysis.drp.skyPlotVisit.SkyPlotVisitTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import CalcE2
        config.axisLabels.update({"z": "E2: 2i$_{xy}$PSF/(i$_{xx}$PSF + i$_{yy}$PSF)"})
      axisActions.zAction: CalcE2
      axisActions.zAction.colXx: ixxPSF
      axisActions.zAction.colYy: iyyPSF
      axisActions.zAction.colXy: ixyPSF
      connections.plotName: e2_ixxPSF
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.skyPlot: injected_skyPlotVisit_e2_ixxPSF
  plot_e2PSF_scatter_visit:
    class: lsst.analysis.drp.scatterPlotVisit.ScatterPlotVisitTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import CalcE2
        config.axisLabels.update({"y": "E2: 2i$_{xy}$PSF/(i$_{xx}$PSF + i$_{yy}$PSF)"})
      axisActions.yAction: CalcE2
      axisActions.yAction.colXx: ixxPSF
      axisActions.yAction.colYy: iyyPSF
      axisActions.yAction.colXy: ixyPSF
      connections.plotName: e2_ixxPSF
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.scatterPlot: injected_scatterPlotVisit_e2_ixxPSF
  plot_ellipResids_quiver_visit:
    class: lsst.analysis.drp.quiverPlotVisit.QuiverPlotVisitTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import CalcE, CalcEDiff
        config.axisLabels.update({"z": "E Difference (e$_{MEAS}$ - e$_{PSF}$)"})
      axisActions.zAction: CalcEDiff
      axisActions.zAction.halvePhaseAngle: true
      axisActions.zAction.colA: CalcE
      axisActions.zAction.colA.colXx: ixx
      axisActions.zAction.colA.colYy: iyy
      axisActions.zAction.colA.colXy: ixy
      axisActions.zAction.colA.halvePhaseAngle: false
      axisActions.zAction.colB: CalcE
      axisActions.zAction.colB.colXx: ixxPSF
      axisActions.zAction.colB.colYy: iyyPSF
      axisActions.zAction.colB.colXy: ixyPSF
      axisActions.zAction.colB.halvePhaseAngle: false
      connections.plotName: Ediff_ixxPSF
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.skyPlot: injected_quiverPlotVisit_Ediff_ixxPSF
  plot_shapeSizePSF_scatter_visit:
    class: lsst.analysis.drp.scatterPlotVisit.ScatterPlotVisitTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import CalcShapeSize
        config.axisLabels.update({"y": "Shape: (i$_{xx}$PSF*i$_{yy}$PSF - i$_{xy}$PSF^2$)$^{1/4}$"})
      axisActions.yAction: CalcShapeSize
      axisActions.yAction.colXx: ixxPSF
      axisActions.yAction.colYy: iyyPSF
      axisActions.yAction.colXy: ixyPSF
      connections.plotName: shape_ixxPSF
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.scatterPlot: injected_scatterPlotVisit_shape_ixxPSF
  plot_shapeSizePSF_sky_visit:
    class: lsst.analysis.drp.skyPlotVisit.SkyPlotVisitTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import CalcShapeSize
        config.axisLabels.update({"z": "Shape: (i$_{xx}$PSF*i$_{yy}$PSF - i$_{xy}$PSF$^2$)$^{1/4}$"})
      axisActions.zAction: CalcShapeSize
      axisActions.zAction.colXx: ixxPSF
      axisActions.zAction.colYy: iyyPSF
      axisActions.zAction.colXy: ixyPSF
      connections.plotName: shape_ixxPSF
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.skyPlot: injected_skyPlotVisit_shape_ixxPSF
  plot_shapeSizeDiff_scatter_visit:
    class: lsst.analysis.drp.scatterPlotVisit.ScatterPlotVisitTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import CalcShapeSize
        from lsst.pipe.tasks.dataFrameActions import SubtractColumns
        config.axisLabels.update({"y": "Shape Difference (i$_{xx}$ - i$_{xx}$PSF)"})
      axisActions.yAction: SubtractColumns
      axisActions.yAction.colA: CalcShapeSize
      axisActions.yAction.colA.colXx: ixx
      axisActions.yAction.colA.colYy: iyy
      axisActions.yAction.colA.colXy: ixy
      axisActions.yAction.colB: CalcShapeSize
      axisActions.yAction.colB.colXx: ixxPSF
      axisActions.yAction.colB.colYy: iyyPSF
      axisActions.yAction.colB.colXy: ixyPSF
      connections.plotName: shapeDiff_ixxPSF
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.scatterPlot: injected_scatterPlotVisit_shapeDiff_ixxPSF
  plot_shapeSizeFractionalDiff_scatter_visit:
    class: lsst.analysis.drp.scatterPlotVisit.ScatterPlotVisitTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import CalcShapeSize
        from lsst.pipe.tasks.dataFrameActions import FractionalDifferenceColumns
        config.axisLabels.update({"y": "Fractional shape difference (i$_{xx}$ - i$_{xx}$PSF)"})
      axisActions.yAction: FractionalDifferenceColumns
      axisActions.yAction.colA: CalcShapeSize
      axisActions.yAction.colA.colXx: ixx
      axisActions.yAction.colA.colYy: iyy
      axisActions.yAction.colA.colXy: ixy
      axisActions.yAction.colB: CalcShapeSize
      axisActions.yAction.colB.colXx: ixxPSF
      axisActions.yAction.colB.colYy: iyyPSF
      axisActions.yAction.colB.colXy: ixyPSF
      connections.plotName: shapeFractionDiff_sizePSF_scatter
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.scatterPlot: injected_scatterPlotVisit_shapeFractionDiff_sizePSF_scatter
  plot_E1Diff_scatter_visit:
    class: lsst.analysis.drp.scatterPlotVisit.ScatterPlotVisitTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import CalcE1
        from lsst.pipe.tasks.dataFrameActions import SubtractColumns
        config.axisLabels.update({"y": "E1 Difference (i$_{xx}$ - i$_{xx}$PSF)"})
      axisActions.yAction: SubtractColumns
      axisActions.yAction.colA: CalcE1
      axisActions.yAction.colA.colXx: ixx
      axisActions.yAction.colA.colYy: iyy
      axisActions.yAction.colB: CalcE1
      axisActions.yAction.colB.colXx: ixxPSF
      axisActions.yAction.colB.colYy: iyyPSF
      connections.plotName: E1Diff_ixxPSF
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.scatterPlot: injected_scatterPlotVisit_E1Diff_ixxPSF
  plot_E2Diff_scatter_visit:
    class: lsst.analysis.drp.scatterPlotVisit.ScatterPlotVisitTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import CalcE2
        from lsst.pipe.tasks.dataFrameActions import SubtractColumns
        config.axisLabels.update({"y": "E2 Difference (i$_{xx}$ - i$_{xx}$PSF)"})
      axisActions.yAction: SubtractColumns
      axisActions.yAction.colA: CalcE2
      axisActions.yAction.colA.colXx: ixx
      axisActions.yAction.colA.colYy: iyy
      axisActions.yAction.colB: CalcE2
      axisActions.yAction.colB.colXx: ixxPSF
      axisActions.yAction.colB.colYy: iyyPSF
      connections.plotName: E2Diff_ixxPSF
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.scatterPlot: injected_scatterPlotVisit_E2Diff_ixxPSF
  plot_E1Diff_sky_visit:
    class: lsst.analysis.drp.skyPlotVisit.SkyPlotVisitTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import CalcE1
        from lsst.pipe.tasks.dataFrameActions import SubtractColumns
        config.axisLabels.update({"z": "E1 Difference (i$_{xx}$ - i$_{xx}$PSF)"})
      axisActions.zAction: SubtractColumns
      axisActions.zAction.colA: CalcE1
      axisActions.zAction.colA.colXx: ixx
      axisActions.zAction.colA.colYy: iyy
      axisActions.zAction.colB: CalcE1
      axisActions.zAction.colB.colXx: ixxPSF
      axisActions.zAction.colB.colYy: iyyPSF
      connections.plotName: E1Diff_ixxPSF
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.skyPlot: injected_skyPlotVisit_E1Diff_ixxPSF
  plot_E2Diff_sky_visit:
    class: lsst.analysis.drp.skyPlotVisit.SkyPlotVisitTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import CalcE2
        from lsst.pipe.tasks.dataFrameActions import SubtractColumns
        config.axisLabels.update({"z": "E2 Difference (i$_{xx}$ - i$_{xx}$PSF)"})
      axisActions.zAction: SubtractColumns
      axisActions.zAction.colA: CalcE2
      axisActions.zAction.colA.colXx: ixx
      axisActions.zAction.colA.colYy: iyy
      axisActions.zAction.colA.colXy: ixy
      axisActions.zAction.colB: CalcE2
      axisActions.zAction.colB.colXx: ixxPSF
      axisActions.zAction.colB.colYy: iyyPSF
      axisActions.zAction.colB.colXy: ixyPSF
      connections.plotName: E2Diff_ixxPSF
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.skyPlot: injected_skyPlotVisit_E2Diff_ixxPSF
  plot_ShapeDiff_sky_visit:
    class: lsst.analysis.drp.skyPlotVisit.SkyPlotVisitTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import CalcShapeSize
        from lsst.pipe.tasks.dataFrameActions import SubtractColumns
        config.axisLabels.update({"z": "Size Difference (i$_{xx}$ - i$_{xx}$PSF)"})
      axisActions.zAction: SubtractColumns
      axisActions.zAction.colA: CalcShapeSize
      axisActions.zAction.colA.colXx: ixx
      axisActions.zAction.colA.colYy: iyy
      axisActions.zAction.colA.colXy: ixy
      axisActions.zAction.colB: CalcShapeSize
      axisActions.zAction.colB.colXx: ixxPSF
      axisActions.zAction.colB.colYy: iyyPSF
      axisActions.zAction.colB.colXy: ixyPSF
      connections.plotName: ShapeSizeDiff_ixxPSF
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.skyPlot: injected_skyPlotVisit_ShapeSizeDiff_ixxPSF
  plot_CircAp12_sub_PSF_meas_sky_stars_visit:
    class: lsst.analysis.drp.skyPlotVisit.SkyPlotVisitTask
    config:
    - connections.plotName: CircAp12_sub_PSF_meas_stars
      connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.skyPlot: injected_skyPlotVisit_CircAp12_sub_PSF_meas_stars
  plot_CircAp12_sub_PSF_meas_sky_gals_visit:
    class: lsst.analysis.drp.skyPlotVisit.SkyPlotVisitTask
    config:
    - python: 'from lsst.analysis.drp.dataSelectors import GalaxyIdentifier

        '
      connections.plotName: CircAp12_sub_PSF_meas_gals
      sourceSelectorActions.sourceSelector: GalaxyIdentifier
      sourceSelectorActions.sourceSelector.band: ''
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.skyPlot: injected_skyPlotVisit_CircAp12_sub_PSF_meas_gals
  plot_CircAp12_sub_PSF_meas_calib_psf_used_sky_stars_visit:
    class: lsst.analysis.drp.skyPlotVisit.SkyPlotVisitTask
    config:
    - python: 'from lsst.analysis.drp.dataSelectors import FlagSelector

        '
      connections.plotName: CircAp12_sub_PSF_meas_calib_psf_used_stars
      selectorActions.calibPointSelector: FlagSelector
      selectorActions.calibPointSelector.selectWhenTrue:
      - calib_psf_used
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.skyPlot: injected_skyPlotVisit_CircAp12_sub_PSF_meas_calib_psf_used_stars
  plot_CircAp12_sub_PSF_meas_calib_psf_used_sky_gals_visit:
    class: lsst.analysis.drp.skyPlotVisit.SkyPlotVisitTask
    config:
    - python: 'from lsst.analysis.drp.dataSelectors import FlagSelector, GalaxyIdentifier

        '
      connections.plotName: CircAp12_sub_PSF_meas_calib_psf_used_gals
      selectorActions.calibPointSelector: FlagSelector
      selectorActions.calibPointSelector.selectWhenTrue:
      - calib_psf_used
      sourceSelectorActions.sourceSelector: GalaxyIdentifier
      sourceSelectorActions.sourceSelector.band: ''
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.skyPlot: injected_skyPlotVisit_CircAp12_sub_PSF_meas_calib_psf_used_gals
  plot_CircAp12_sub_PSF_calib_psf_used_sky_unknown_visit:
    class: lsst.analysis.drp.skyPlotVisit.SkyPlotVisitTask
    config:
    - python: 'from lsst.analysis.drp.dataSelectors import FlagSelector, UnknownIdentifier

        '
      connections.plotName: CircAp12_sub_PSF_meas_calib_psf_used_unkowns
      selectorActions.calibPointSelector: FlagSelector
      selectorActions.calibPointSelector.selectWhenTrue:
      - calib_psf_used
      sourceSelectorActions.sourceSelector: UnknownIdentifier
      sourceSelectorActions.sourceSelector.band: ''
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.skyPlot: injected_skyPlotVisit_CircAp12_sub_PSF_meas_calib_psf_used_unkowns
  plot_CircAp12_sub_PSF_meas_calib_psf_used_scatter_visit:
    class: lsst.analysis.drp.scatterPlotVisit.ScatterPlotVisitTask
    config:
    - python: 'from lsst.analysis.drp.dataSelectors import FlagSelector, GalaxyIdentifier,
        UnknownIdentifier

        '
      connections.plotName: CircAp12_sub_PSF_meas_calib_psf_used
      selectorActions.calibPointSelector: FlagSelector
      selectorActions.calibPointSelector.selectWhenTrue:
      - calib_psf_used
      sourceSelectorActions.update:
        galaxySelector: GalaxyIdentifier
        unknownSelector: UnknownIdentifier
      sourceSelectorActions.galaxySelector.band: ''
      sourceSelectorActions.unknownSelector.band: ''
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.scatterPlot: injected_scatterPlotVisit_CircAp12_sub_PSF_meas_calib_psf_used
  plot_CircAp12_sub_PSF_all_scatter_visit:
    class: lsst.analysis.drp.scatterPlotVisit.ScatterPlotVisitTask
    config:
    - python: 'from lsst.analysis.drp.dataSelectors import GalaxyIdentifier, UnknownIdentifier

        '
      connections.plotName: CircAp12_sub_PSF_all
      sourceSelectorActions.update:
        galaxySelector: GalaxyIdentifier
        unknownSelector: UnknownIdentifier
      sourceSelectorActions.galaxySelector.band: ''
      sourceSelectorActions.unknownSelector.band: ''
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.scatterPlot: injected_scatterPlotVisit_CircAp12_sub_PSF_all
  plot_CircAp25_sub_PSF_all_scatter_visit:
    class: lsst.analysis.drp.scatterPlotVisit.ScatterPlotVisitTask
    config:
    - python: |
        from lsst.analysis.drp.dataSelectors import GalaxyIdentifier, UnknownIdentifier
        config.axisActions.yAction.col1 = "ap25Flux"
        config.axisLabels.update({"y": "{} - {} (mmag)".
                                 format(config.axisActions.yAction.col1.removesuffix("Flux"),
                                        config.axisActions.yAction.col2.removesuffix("Flux"))})
      connections.plotName: CircAp25_sub_PSF_all
      sourceSelectorActions.update:
        galaxySelector: GalaxyIdentifier
        unknownSelector: UnknownIdentifier
      sourceSelectorActions.galaxySelector.band: ''
      sourceSelectorActions.unknownSelector.band: ''
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.scatterPlot: injected_scatterPlotVisit_CircAp25_sub_PSF_all
  plot_CircAp12_sub_PSF_gals_scatter_visit:
    class: lsst.analysis.drp.scatterPlotVisit.ScatterPlotVisitTask
    config:
    - python: 'from lsst.analysis.drp.dataSelectors import GalaxyIdentifier

        '
      connections.plotName: CircAp12_sub_PSF_gals
      sourceSelectorActions.sourceSelector: GalaxyIdentifier
      sourceSelectorActions.sourceSelector.band: ''
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.scatterPlot: injected_scatterPlotVisit_CircAp12_sub_PSF_gals
  plot_CircAp25_sub_PSF_gals_scatter_visit:
    class: lsst.analysis.drp.scatterPlotVisit.ScatterPlotVisitTask
    config:
    - python: |
        from lsst.analysis.drp.dataSelectors import GalaxyIdentifier
        config.axisActions.yAction.col1 = "ap25Flux"
        config.axisLabels.update({"y": "{} - {} (mmag)".
                                 format(config.axisActions.yAction.col1.removesuffix("Flux"),
                                        config.axisActions.yAction.col2.removesuffix("Flux"))})
      connections.plotName: CircAp25_sub_PSF_gals
      sourceSelectorActions.sourceSelector: GalaxyIdentifier
      sourceSelectorActions.sourceSelector.band: ''
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.scatterPlot: injected_scatterPlotVisit_CircAp25_sub_PSF_gals
  plot_CircAp12_sub_PSF_meas_scatter_visit:
    class: lsst.analysis.drp.scatterPlotVisit.ScatterPlotVisitTask
    config:
    - connections.plotName: CircAp12_sub_PSF_meas
      connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.scatterPlot: injected_scatterPlotVisit_CircAp12_sub_PSF_meas
  plot_CircAp25_sub_PSF_meas_scatter_visit:
    class: lsst.analysis.drp.scatterPlotVisit.ScatterPlotVisitTask
    config:
    - python: |
        config.axisActions.yAction.col1 = "ap25Flux"
        config.axisLabels.update({"y": "{} - {} (mmag)".
                                 format(config.axisActions.yAction.col1.removesuffix("Flux"),
                                        config.axisActions.yAction.col2.removesuffix("Flux"))})
      connections.plotName: CircAp25_sub_PSF_meas
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.scatterPlot: injected_scatterPlotVisit_CircAp25_sub_PSF_meas
  plot_PSFluxSN_meas_sky_all_visit:
    class: lsst.analysis.drp.skyPlotVisit.SkyPlotVisitTask
    config:
    - python: |
        from lsst.pipe.tasks.dataFrameActions import DivideColumns
        config.axisLabels.update({"z": "S/N = psfFlux/psfFluxErr"})
      axisActions.zAction: DivideColumns
      axisActions.zAction.colA.column: psfFlux
      axisActions.zAction.colB.column: psfFluxErr
      connections.plotName: PSFluxSN_meas_all
      sourceSelectorActions: None
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.skyPlot: injected_skyPlotVisit_PSFluxSN_meas_all
  plot_skyObject_sky_visit:
    class: lsst.analysis.drp.skyPlotVisit.SkyPlotVisitTask
    config:
    - python: |
        from lsst.analysis.drp.dataSelectors import FlagSelector
        from lsst.pipe.tasks.dataFrameActions import SingleColumnAction
        config.axisLabels.update({"z": "Sky Object: ap09Flux (nJy)"})
      connections.plotName: skyObject
      axisActions.zAction: SingleColumnAction
      axisActions.zAction.column: ap09Flux
      selectorActions.flagSelector: FlagSelector
      selectorActions.flagSelector.selectWhenTrue:
      - sky_source
      selectorActions.remove:
      - catSnSelector
      sourceSelectorActions: None
      statisticSelectorActions.statSelector.threshold: -1e12
    - connections.catPlot: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.skyPlot: injected_skyPlotVisit_skyObject
  plot_astromRefCat_sky_visit_dRA:
    class: lsst.analysis.drp.skyPlotVisit.SkyPlotVisitTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import AstromDiff
        config.axisLabels.update({"z": "$RA_{target} - RA_{ref}$ (marcsec)"})
      connections.plotName: astromRefCatResiduals_sky_ra_visit
      connections.catPlot: sourceTable_visit_astrometryRefCat_match
      axisActions.zAction: AstromDiff
      axisActions.zAction.col1: coord_ra_target
      axisActions.zAction.col2: coord_ra_ref
      axisActions.xAction.column: coord_ra_ref
      axisActions.yAction.column: coord_dec_ref
      selectorActions.remove:
      - catSnSelector
    - connections.catPlot: injected_sourceTable_visit_astrometryRefCat_match
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.skyPlot: injected_skyPlotVisit_astromRefCatResiduals_sky_ra_visit
  plot_astromRefCat_sky_visit_dDec:
    class: lsst.analysis.drp.skyPlotVisit.SkyPlotVisitTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import AstromDiff
        config.axisLabels.update({"z": "$Dec_{target} - Dec_{ref}$ (marcsec)"})
      connections.plotName: astromRefCatResiduals_sky_dec_visit
      connections.catPlot: sourceTable_visit_astrometryRefCat_match
      axisActions.zAction: AstromDiff
      axisActions.zAction.col1: coord_dec_target
      axisActions.zAction.col2: coord_dec_ref
      axisActions.xAction.column: coord_ra_ref
      axisActions.yAction.column: coord_dec_ref
      selectorActions.remove:
      - catSnSelector
    - connections.catPlot: injected_sourceTable_visit_astrometryRefCat_match
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.skyPlot: injected_skyPlotVisit_astromRefCatResiduals_sky_dec_visit
  plot_astromRefCat_scatter_visit_dRA:
    class: lsst.analysis.drp.scatterPlotVisit.ScatterPlotVisitTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import AstromDiff
        config.axisLabels.update({"y": "$RA_{target} - RA_{ref}$ (marcsec)"})
      connections.plotName: astromRefCatResiduals_scatter_ra_visit
      connections.catPlot: sourceTable_visit_astrometryRefCat_match
      axisActions.yAction: AstromDiff
      axisActions.yAction.col1: coord_ra_target
      axisActions.yAction.col2: coord_ra_ref
      selectorActions.remove:
      - catSnSelector
    - connections.catPlot: injected_sourceTable_visit_astrometryRefCat_match
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.scatterPlot: injected_scatterPlotVisit_astromRefCatResiduals_scatter_ra_visit
  plot_astromRefCat_scatter_visit_dDec:
    class: lsst.analysis.drp.scatterPlotVisit.ScatterPlotVisitTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import AstromDiff
        config.axisLabels.update({"y": "$Dec_{target} - Dec_{ref}$ (marcsec)"})
      connections.plotName: astromRefCatResiduals_scatter_dec_visit
      connections.catPlot: sourceTable_visit_astrometryRefCat_match
      axisActions.yAction: AstromDiff
      axisActions.yAction.col1: coord_dec_target
      axisActions.yAction.col2: coord_dec_ref
      selectorActions.remove:
      - catSnSelector
    - connections.catPlot: injected_sourceTable_visit_astrometryRefCat_match
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.scatterPlot: injected_scatterPlotVisit_astromRefCatResiduals_scatter_dec_visit
  plot_RhoStatistics_visit:
    class: lsst.analysis.drp.rhoPlotVisit.RhoPlotVisitTask
    config:
    - connections.catPlot: injected_sourceTable_visit
      connections.rho1Plot: injected_rho1PlotVisit_deltaCoords
      connections.rho4Plot: injected_rho4PlotVisit_deltaCoords
      connections.rho5Plot: injected_rho5PlotVisit_deltaCoords
      connections.rho3Plot: injected_rho3PlotVisit_deltaCoords
      connections.rho2Plot: injected_rho2PlotVisit_deltaCoords
      connections.rho0Plot: injected_rho0PlotVisit_deltaCoords
  match_astromRefCat_visit:
    class: lsst.analysis.drp.catalogMatch.CatalogMatchVisitTask
    config:
    - python: 'from lsst.analysis.drp.dataSelectors import VisitPlotFlagSelector

        '
      selectorActions.flagSelector: VisitPlotFlagSelector
      sourceSelectorActions.sourceSelector.band: ''
    - connections.catalog: injected_sourceTable_visit
      connections.visitSummaryTable: injected_finalVisitSummary
      connections.matchCatalog: injected_sourceTable_visit_astrometryRefCat_match
  plot_CircAp12_sub_PSF_meas_sky_stars:
    class: lsst.analysis.drp.skyPlot.SkyPlotTask
    config:
    - connections.plotName: CircAp12_sub_PSF_meas_stars_i
      connections.catPlot: injected_objectTable_tract
      connections.skyPlot: injected_skyPlot_CircAp12_sub_PSF_meas_stars_i
  plot_CircAp12_sub_PSF_meas_sky_gals:
    class: lsst.analysis.drp.skyPlot.SkyPlotTask
    config:
    - python: 'from lsst.analysis.drp.dataSelectors import GalaxyIdentifier

        '
      connections.plotName: CircAp12_sub_PSF_meas_gals_i
      sourceSelectorActions.sourceSelector: GalaxyIdentifier
    - connections.catPlot: injected_objectTable_tract
      connections.skyPlot: injected_skyPlot_CircAp12_sub_PSF_meas_gals_i
  plot_CircAp12_sub_PSF_meas_calib_psf_used_sky_all:
    class: lsst.analysis.drp.skyPlot.SkyPlotTask
    config:
    - python: 'from lsst.analysis.drp.dataSelectors import FlagSelector

        '
      connections.plotName: CircAp12_sub_PSF_meas_calib_psf_used_all_i
      sourceSelectorActions.update:
        galaxySelector: GalaxyIdentifier
        unknownSelector: UnknownIdentifier
      selectorActions.calibPointSelector: FlagSelector
      selectorActions.calibPointSelector.selectWhenTrue:
      - i_calib_psf_used
      fixAroundZero: true
    - connections.catPlot: injected_objectTable_tract
      connections.skyPlot: injected_skyPlot_CircAp12_sub_PSF_meas_calib_psf_used_all_i
  plot_PSFFluxSN_meas_sky_all:
    class: lsst.analysis.drp.skyPlot.SkyPlotTask
    config:
    - python: |
        from lsst.pipe.tasks.dataFrameActions import DivideColumns
        config.axisLabels.update({"z": "S/N = psfFlux/psfFluxErr"})
      connections.plotName: PSFFluxSN_meas_all_i
      axisActions.zAction: DivideColumns
      axisActions.zAction.colA.column: i_psfFlux
      axisActions.zAction.colB.column: i_psfFluxErr
      sourceSelectorActions: None
    - connections.catPlot: injected_objectTable_tract
      connections.skyPlot: injected_skyPlot_PSFFluxSN_meas_all_i
  plot_CModel_sub_PSFmag_meas_sky_galaxies:
    class: lsst.analysis.drp.skyPlot.SkyPlotTask
    config:
    - python: |
        from lsst.analysis.drp.dataSelectors import GalaxyIdentifier
        config.axisLabels.update({"z": "CModel - PSF (mmag)"})
      connections.plotName: CModel_sub_PSF_meas_galaxies_i
      axisActions.zAction.col1: i_cModelFlux
      sourceSelectorActions.sourceSelector: GalaxyIdentifier
    - connections.catPlot: injected_objectTable_tract
      connections.skyPlot: injected_skyPlot_CModel_sub_PSF_meas_galaxies_i
  plot_CModel_sub_PSFmag_meas_sky_stars:
    class: lsst.analysis.drp.skyPlot.SkyPlotTask
    config:
    - python: 'config.axisLabels.update({"z": "CModel - PSF (mmag)"})

        '
      connections.plotName: CModel_sub_PSF_meas_stars_i
      axisActions.zAction.col1: i_cModelFlux
      fixAroundZero: true
    - connections.catPlot: injected_objectTable_tract
      connections.skyPlot: injected_skyPlot_CModel_sub_PSF_meas_stars_i
  plot_CircAp12_sub_PSF_meas_calib_psf_used_all_scatter:
    class: lsst.analysis.drp.scatterPlot.ScatterPlotWithTwoHistsTask
    config:
    - python: 'from lsst.analysis.drp.dataSelectors import FlagSelector, GalaxyIdentifier,
        UnknownIdentifier

        '
      connections.plotName: CircAp12_sub_PSF_meas_calib_psf_used_all_i
      sourceSelectorActions.update:
        galaxySelector: GalaxyIdentifier
        unknownSelector: UnknownIdentifier
      selectorActions.calibPointSelector: FlagSelector
      selectorActions.calibPointSelector.selectWhenTrue:
      - i_calib_psf_used
    - connections.catPlot: injected_objectTable_tract
      connections.scatterPlot: injected_scatterTwoHistPlot_CircAp12_sub_PSF_meas_calib_psf_used_all_i
  plot_CircAp12_sub_PSF_meas_stars_scatter:
    class: lsst.analysis.drp.scatterPlot.ScatterPlotWithTwoHistsTask
    config:
    - connections.plotName: CircAp12_sub_PSF_meas_stars_i
      connections.catPlot: injected_objectTable_tract
      connections.scatterPlot: injected_scatterTwoHistPlot_CircAp12_sub_PSF_meas_stars_i
  plot_CircAp12_sub_PSF_meas_gals_scatter:
    class: lsst.analysis.drp.scatterPlot.ScatterPlotWithTwoHistsTask
    config:
    - python: 'from lsst.analysis.drp.dataSelectors import GalaxyIdentifier

        '
      connections.plotName: CircAp12_sub_PSF_meas_gals_i
      sourceSelectorActions.sourceSelector: GalaxyIdentifier
    - connections.catPlot: injected_objectTable_tract
      connections.scatterPlot: injected_scatterTwoHistPlot_CircAp12_sub_PSF_meas_gals_i
  skyPlot_skyObject:
    class: lsst.analysis.drp.skyPlot.SkyPlotTask
    config:
    - python: |
        from lsst.analysis.drp.dataSelectors import FlagSelector
        config.axisLabels.update({"z": "Sky Object i_ap09Flux (nJy)"})
      connections.plotName: skyObject_i
      axisActions.zAction: SingleColumnAction
      axisActions.zAction.column: i_ap09Flux
      selectorActions.flagSelector: FlagSelector
      selectorActions.flagSelector.selectWhenTrue:
      - sky_object
      selectorActions.flagSelector.selectWhenFalse:
      - i_pixelFlags_edge
      selectorActions.remove:
      - catSnSelector
      sourceSelectorActions: None
      statisticSelectorActions.statSelector.threshold: -1e12
    - connections.catPlot: injected_objectTable_tract
      connections.skyPlot: injected_skyPlot_skyObject_i
  histPlot_skyObject:
    class: lsst.analysis.drp.histPlot.HistPlotTask
    config:
    - python: |
        from lsst.analysis.drp.dataSelectors import FlagSelector
        from lsst.analysis.drp import calcFunctors
        from lsst.pipe.tasks.dataFrameActions import SingleColumnAction
        config.panels["panel1"] = HistPlotConfig
        config.panels["panel1"].label = "Flux (nJy)"
        config.panels["panel1"].actions.update = {
          "hist1": SingleColumnAction(column="i_psfFlux"),
          "hist2": SingleColumnAction(column="i_ap09Flux"),
        }
        config.panels["panel1"].histLabels = {
          "hist1": "psfFlux",
          "hist2": "ap09Flux",
        }
        config.panels["panel2"] = HistPlotConfig
        config.panels["panel2"].label = "S/N"
        config.panels["panel2"].actions.update = {
          "hist1": calcFunctors.SNCalculator(
            colA=SingleColumnAction(column="i_psfFlux"),
            colB=SingleColumnAction(column="i_psfFluxErr"),),
          "hist2": calcFunctors.SNCalculator(
            colA=SingleColumnAction(column="i_ap09Flux"),
            colB=SingleColumnAction(column="i_ap09FluxErr"),),
        }
        config.panels["panel2"].histLabels = {
          "hist1": "psfFlux SN",
          "hist2": "ap09Flux SN",
        }
      connections.plotName: skyObject_i
      selectorActions.flagSelector: FlagSelector
      selectorActions.flagSelector.selectWhenTrue:
      - sky_object
      selectorActions.flagSelector.selectWhenFalse:
      - i_pixelFlags_edge
    - connections.catPlot: injected_objectTable_tract
      connections.histPlot: injected_histPlot_skyObject_i
  plot_ri_gr_psf:
    class: lsst.analysis.drp.colorColorPlot.ColorColorPlotTask
    config:
    - connections.plotName: ri_gr_psf
      xLims: (-0.99, 2.4)
      yLims: (-0.8, 2.8)
      connections.catPlot: injected_objectTable_tract
      connections.colorColorPlot: injected_colorColorPlot_ri_gr_psf
  plot_ri_gr_cmodel:
    class: lsst.analysis.drp.colorColorPlot.ColorColorPlotTask
    config:
    - python: |
        config.fluxTypeForColor = "cModelFlux"
        config.axisActions.zAction.column = "i_cModelFlux"
        config.setConfigDependencies()
      connections.plotName: ri_gr_cmodel
      xLims: (-0.99, 2.4)
      yLims: (-0.8, 2.8)
    - connections.catPlot: injected_objectTable_tract
      connections.colorColorPlot: injected_colorColorPlot_ri_gr_cmodel
  plot_iz_ri_psf:
    class: lsst.analysis.drp.colorColorPlot.ColorColorPlotTask
    config:
    - python: |
        config.bands = {"band1": "r", "band2": "i", "band3": "z"}
        config.setConfigDependencies()
      connections.plotName: iz_ri_psf
      xLims: (-1.2, 3.3)
      yLims: (-0.99, 1.99)
    - connections.catPlot: injected_objectTable_tract
      connections.colorColorPlot: injected_colorColorPlot_iz_ri_psf
  plot_astromRefCat_sky_tract_dRA:
    class: lsst.analysis.drp.skyPlot.SkyPlotTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import AstromDiff
        config.axisLabels.update({"z": "$RA_{target} - RA_{ref}$ (marcsec)"})
      connections.catPlot: objectTable_tract_astrometryRefCat_match
      connections.plotName: astromRefCatResiduals_sky_ra_coadd_i
      axisActions.zAction: AstromDiff
      axisActions.zAction.col1: coord_ra_target
      axisActions.zAction.col2: coord_ra_ref
      axisActions.xAction.column: coord_ra_ref
      axisActions.yAction.column: coord_dec_ref
      selectorActions.remove:
      - catSnSelector
    - connections.catPlot: injected_objectTable_tract_astrometryRefCat_match
      connections.skyPlot: injected_skyPlot_astromRefCatResiduals_sky_ra_coadd_i
  plot_astromRefCat_sky_tract_dDec:
    class: lsst.analysis.drp.skyPlot.SkyPlotTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import AstromDiff
        config.axisLabels.update({"z": "$Dec_{target} - Dec_{ref}$ (marcsec)"})
      connections.catPlot: objectTable_tract_astrometryRefCat_match
      connections.plotName: astromRefCatResiduals_sky_dec_coadd_i
      axisActions.zAction: AstromDiff
      axisActions.zAction.col1: coord_dec_target
      axisActions.zAction.col2: coord_dec_ref
      axisActions.xAction.column: coord_ra_ref
      axisActions.yAction.column: coord_dec_ref
      selectorActions.remove:
      - catSnSelector
    - connections.catPlot: injected_objectTable_tract_astrometryRefCat_match
      connections.skyPlot: injected_skyPlot_astromRefCatResiduals_sky_dec_coadd_i
  plot_astromRefCat_scatter_tract_dRA:
    class: lsst.analysis.drp.scatterPlot.ScatterPlotWithTwoHistsTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import AstromDiff
        config.axisLabels.update({"y": "$RA_{target} - RA_{ref}$ (marcsec)"})
      connections.catPlot: objectTable_tract_astrometryRefCat_match
      connections.plotName: astromRefCatResiduals_scatter_ra_coadd_i
      axisActions.yAction: AstromDiff
      axisActions.yAction.col1: coord_ra_target
      axisActions.yAction.col2: coord_ra_ref
      selectorActions.remove:
      - catSnSelector
      highSnStatisticSelectorActions.statSelector.fluxType: psfFlux
      lowSnStatisticSelectorActions.statSelector.fluxType: psfFlux
    - connections.catPlot: injected_objectTable_tract_astrometryRefCat_match
      connections.scatterPlot: injected_scatterTwoHistPlot_astromRefCatResiduals_scatter_ra_coadd_i
  plot_astromRefCat_scatter_tract_dDec:
    class: lsst.analysis.drp.scatterPlot.ScatterPlotWithTwoHistsTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import AstromDiff
        config.axisLabels.update({"y": "$Dec_{target} - Dec_{ref}$ (marcsec)"})
      connections.catPlot: objectTable_tract_astrometryRefCat_match
      connections.plotName: astromRefCatResiduals_scatter_dec_coadd_i
      axisActions.yAction: AstromDiff
      axisActions.yAction.col1: coord_dec_target
      axisActions.yAction.col2: coord_dec_ref
      selectorActions.remove:
      - catSnSelector
      highSnStatisticSelectorActions.statSelector.fluxType: psfFlux
      lowSnStatisticSelectorActions.statSelector.fluxType: psfFlux
    - connections.catPlot: injected_objectTable_tract_astrometryRefCat_match
      connections.scatterPlot: injected_scatterTwoHistPlot_astromRefCatResiduals_scatter_dec_coadd_i
  plot_E1Diff_scatter:
    class: lsst.analysis.drp.scatterPlot.ScatterPlotWithTwoHistsTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import CalcE1
        from lsst.pipe.tasks.dataFrameActions import SubtractColumns
        config.axisActions.xAction.column = "i_psfFlux"
        config.axisActions.magAction.column = "i_psfFlux"
        config.axisLabels.update({
               "x": config.axisActions.xAction.column.removesuffix("Flux") + " (mag)",
               "mag": config.axisActions.magAction.column.removesuffix("Flux") + " (mag)",
               "y": "E1 Difference (e1 - e1$_{PSF}$)"})
      axisActions.yAction: SubtractColumns
      axisActions.yAction.colA: CalcE1
      axisActions.yAction.colA.colXx: i_ixx
      axisActions.yAction.colA.colYy: i_iyy
      axisActions.yAction.colB: CalcE1
      axisActions.yAction.colB.colXx: i_ixxPSF
      axisActions.yAction.colB.colYy: i_iyyPSF
      connections.plotName: E1Diff_scatter_i
    - connections.catPlot: injected_objectTable_tract
      connections.scatterPlot: injected_scatterTwoHistPlot_E1Diff_scatter_i
  plot_E2Diff_scatter:
    class: lsst.analysis.drp.scatterPlot.ScatterPlotWithTwoHistsTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import CalcE2
        from lsst.pipe.tasks.dataFrameActions import SubtractColumns
        config.axisActions.xAction.column = "i_psfFlux"
        config.axisActions.magAction.column = "i_psfFlux"
        config.axisLabels.update({
               "x": config.axisActions.xAction.column.removesuffix("Flux") + " (mag)",
               "mag": config.axisActions.magAction.column.removesuffix("Flux") + " (mag)",
               "y": "E2 Difference (e2 - e2$_{PSF}$)"})
      axisActions.yAction: SubtractColumns
      axisActions.yAction.colA: CalcE2
      axisActions.yAction.colA.colXx: i_ixx
      axisActions.yAction.colA.colYy: i_iyy
      axisActions.yAction.colA.colXy: i_ixy
      axisActions.yAction.colB: CalcE2
      axisActions.yAction.colB.colXx: i_ixxPSF
      axisActions.yAction.colB.colYy: i_iyyPSF
      axisActions.yAction.colB.colXy: i_ixyPSF
      connections.plotName: E2Diff_scatter_i
    - connections.catPlot: injected_objectTable_tract
      connections.scatterPlot: injected_scatterTwoHistPlot_E2Diff_scatter_i
  plot_shapeSizeFractionalDiff_scatter:
    class: lsst.analysis.drp.scatterPlot.ScatterPlotWithTwoHistsTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import CalcShapeSize
        from lsst.pipe.tasks.dataFrameActions import FractionalDifferenceColumns
        config.axisActions.xAction.column = "i_psfFlux"
        config.axisActions.magAction.column = "i_psfFlux"
        config.axisLabels.update({
               "x": config.axisActions.xAction.column.removesuffix("Flux") + " (mag)",
               "mag": config.axisActions.magAction.column.removesuffix("Flux") + " (mag)",
               "y": "Fractional size residuals (S/S$_{PSF}$ - 1)"})
      axisActions.yAction: FractionalDifferenceColumns
      axisActions.yAction.colA: CalcShapeSize
      axisActions.yAction.colA.colXx: i_ixx
      axisActions.yAction.colA.colYy: i_iyy
      axisActions.yAction.colA.colXy: i_ixy
      axisActions.yAction.colB: CalcShapeSize
      axisActions.yAction.colB.colXx: i_ixxPSF
      axisActions.yAction.colB.colYy: i_iyyPSF
      axisActions.yAction.colB.colXy: i_ixyPSF
      connections.plotName: ShapeSizeFractionDiff_scatter_i
    - connections.catPlot: injected_objectTable_tract
      connections.scatterPlot: injected_scatterTwoHistPlot_ShapeSizeFractionDiff_scatter_i
  plot_E1Diff_sky:
    class: lsst.analysis.drp.skyPlot.SkyPlotTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import CalcE1
        from lsst.pipe.tasks.dataFrameActions import SubtractColumns
        config.axisLabels.update({"z": "E1 Difference (e1 - e1$_{PSF}$)"})
      axisActions.zAction: SubtractColumns
      axisActions.zAction.colA: CalcE1
      axisActions.zAction.colA.colXx: i_ixx
      axisActions.zAction.colA.colYy: i_iyy
      axisActions.zAction.colB: CalcE1
      axisActions.zAction.colB.colXx: i_ixxPSF
      axisActions.zAction.colB.colYy: i_iyyPSF
      connections.plotName: E1Diff_sky_i
      fixAroundZero: true
    - connections.catPlot: injected_objectTable_tract
      connections.skyPlot: injected_skyPlot_E1Diff_sky_i
  plot_E2Diff_sky:
    class: lsst.analysis.drp.skyPlot.SkyPlotTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import CalcE2
        from lsst.pipe.tasks.dataFrameActions import SubtractColumns
        config.axisLabels.update({"z": "E2 Difference (e2 - e2$_{PSF}$)"})
      axisActions.zAction: SubtractColumns
      axisActions.zAction.colA: CalcE2
      axisActions.zAction.colA.colXx: i_ixx
      axisActions.zAction.colA.colYy: i_iyy
      axisActions.zAction.colA.colXy: i_ixy
      axisActions.zAction.colB: CalcE2
      axisActions.zAction.colB.colXx: i_ixxPSF
      axisActions.zAction.colB.colYy: i_iyyPSF
      axisActions.zAction.colB.colXy: i_ixyPSF
      connections.plotName: E2Diff_sky_i
      fixAroundZero: true
    - connections.catPlot: injected_objectTable_tract
      connections.skyPlot: injected_skyPlot_E2Diff_sky_i
  plot_shapeSizeFractionalDiff_sky:
    class: lsst.analysis.drp.skyPlot.SkyPlotTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import CalcShapeSize
        from lsst.pipe.tasks.dataFrameActions import FractionalDifferenceColumns
        config.axisLabels.update({"z": "Fractional Size Residual (S/S$_{PSF}$ - 1)"})
      axisActions.zAction: FractionalDifferenceColumns
      axisActions.zAction.colA: CalcShapeSize
      axisActions.zAction.colA.colXx: i_ixx
      axisActions.zAction.colA.colYy: i_iyy
      axisActions.zAction.colA.colXy: i_ixy
      axisActions.zAction.colB: CalcShapeSize
      axisActions.zAction.colB.colXx: i_ixxPSF
      axisActions.zAction.colB.colYy: i_iyyPSF
      axisActions.zAction.colB.colXy: i_ixyPSF
      connections.plotName: ShapeSizeFractionDiff_sky_i
      fixAroundZero: true
    - connections.catPlot: injected_objectTable_tract
      connections.skyPlot: injected_skyPlot_ShapeSizeFractionDiff_sky_i
  plot_E1Diff_magDiff_scatter:
    class: lsst.analysis.drp.scatterPlot.ScatterPlotWithTwoHistsTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import CalcE1, MagDiff
        from lsst.pipe.tasks.dataFrameActions import SubtractColumns
        config.axisActions.xAction = MagDiff
        config.axisActions.xAction.col1 = "i_cModelFlux"
        config.axisActions.xAction.col2 = "i_psfFlux"
        config.axisActions.magAction.column = "i_psfFlux"
        config.axisLabels.update({
               "x": config.axisActions.xAction.col1.removesuffix("Flux") + " - "
                    + config.axisActions.xAction.col2.removesuffix("Flux") + " (mag)",
               "mag": config.axisActions.magAction.column.removesuffix("Flux") + " (mag)",
               "y": "E1 Difference (e1 - e1$_{PSF}$)"})
      axisActions.xAction.returnMillimags: true
      axisActions.yAction: SubtractColumns
      axisActions.yAction.colA: CalcE1
      axisActions.yAction.colA.colXx: i_ixx
      axisActions.yAction.colA.colYy: i_iyy
      axisActions.yAction.colB: CalcE1
      axisActions.yAction.colB.colXx: i_ixxPSF
      axisActions.yAction.colB.colYy: i_iyyPSF
      highSnStatisticSelectorActions: None
      lowSnStatisticSelectorActions: None
      connections.plotName: E1Diff_magDiff_i
    - connections.catPlot: injected_objectTable_tract
      connections.scatterPlot: injected_scatterTwoHistPlot_E1Diff_magDiff_i
  plot_E2Diff_magDiff_scatter:
    class: lsst.analysis.drp.scatterPlot.ScatterPlotWithTwoHistsTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import CalcE2, MagDiff
        from lsst.pipe.tasks.dataFrameActions import SubtractColumns
        config.axisActions.xAction = MagDiff
        config.axisActions.xAction.col1 = "i_cModelFlux"
        config.axisActions.xAction.col2 = "i_psfFlux"
        config.axisActions.magAction.column = "i_psfFlux"
        config.axisLabels.update({
               "x": config.axisActions.xAction.col1.removesuffix("Flux") + " - "
                    + config.axisActions.xAction.col2.removesuffix("Flux") + " (mag)",
               "mag": config.axisActions.magAction.column.removesuffix("Flux") + " (mag)",
               "y": "E2 Difference (e2 - e2$_{PSF}$)"})
      axisActions.yAction: SubtractColumns
      axisActions.yAction.colA: CalcE2
      axisActions.yAction.colA.colXx: i_ixx
      axisActions.yAction.colA.colYy: i_iyy
      axisActions.yAction.colA.colXy: i_ixy
      axisActions.yAction.colB: CalcE2
      axisActions.yAction.colB.colXx: i_ixxPSF
      axisActions.yAction.colB.colYy: i_iyyPSF
      axisActions.yAction.colB.colXy: i_ixyPSF
      highSnStatisticSelectorActions: None
      lowSnStatisticSelectorActions: None
      connections.plotName: E2Diff_magDiff_i
    - connections.catPlot: injected_objectTable_tract
      connections.scatterPlot: injected_scatterTwoHistPlot_E2Diff_magDiff_i
  plot_shapeSizeFractionalDiff_magDiff_scatter:
    class: lsst.analysis.drp.scatterPlot.ScatterPlotWithTwoHistsTask
    config:
    - python: |
        from lsst.analysis.drp.calcFunctors import CalcShapeSize, MagDiff
        from lsst.pipe.tasks.dataFrameActions import FractionalDifferenceColumns
        config.axisActions.xAction = MagDiff
        config.axisActions.xAction.col1 = "i_cModelFlux"
        config.axisActions.xAction.col2 = "i_psfFlux"
        config.axisActions.magAction.column = "i_psfFlux"
        config.axisLabels.update({
               "x": config.axisActions.xAction.col1.removesuffix("Flux") + " - "
                    + config.axisActions.xAction.col2.removesuffix("Flux") + " (mag)",
               "mag": config.axisActions.magAction.column.removesuffix("Flux") + " (mag)",
               "y": "Fractional size residuals (S/S$_{PSF}$ - 1)"})
      axisActions.yAction: FractionalDifferenceColumns
      axisActions.yAction.colA: CalcShapeSize
      axisActions.yAction.colA.colXx: i_ixx
      axisActions.yAction.colA.colYy: i_iyy
      axisActions.yAction.colA.colXy: i_ixy
      axisActions.yAction.colB: CalcShapeSize
      axisActions.yAction.colB.colXx: i_ixxPSF
      axisActions.yAction.colB.colYy: i_iyyPSF
      axisActions.yAction.colB.colXy: i_ixyPSF
      highSnStatisticSelectorActions: None
      lowSnStatisticSelectorActions: None
      connections.plotName: ShapeSizeFractionDiff_magDiff_scatter_i
    - connections.catPlot: injected_objectTable_tract
      connections.scatterPlot: injected_scatterTwoHistPlot_ShapeSizeFractionDiff_magDiff_scatter_i
  plot_RhoStatistics:
    class: lsst.analysis.drp.rhoPlot.RhoPlotTask
    config:
    - rhoStatisticsAction.treecorr.max_sep: 100
      connections.catPlot: injected_objectTable_tract
      connections.rho1Plot: injected_rho1Plot_deltaCoords
      connections.rho4Plot: injected_rho4Plot_deltaCoords
      connections.rho5Plot: injected_rho5Plot_deltaCoords
      connections.rho3Plot: injected_rho3Plot_deltaCoords
      connections.rho2Plot: injected_rho2Plot_deltaCoords
      connections.rho0Plot: injected_rho0Plot_deltaCoords
  plot_wFit_PSF:
    class: lsst.analysis.drp.colorColorFitPlot.ColorColorFitPlotTask
    config:
    - connections.plotName: wFit_PSF
      connections.catPlot: injected_objectTable_tract
      connections.colorColorFitPlot: injected_colorColorFitPlot_wFit_PSF
  plot_wFit_CModel:
    class: lsst.analysis.drp.colorColorFitPlot.ColorColorFitPlotTask
    config:
    - python: |
        config.fluxTypeForColor = "cModelFlux"
        config.setConfigDependencies()
      connections.plotName: wFit_CModel
    - connections.catPlot: injected_objectTable_tract
      connections.colorColorFitPlot: injected_colorColorFitPlot_wFit_CModel
  plot_xFit_PSF:
    class: lsst.analysis.drp.colorColorFitPlot.ColorColorFitPlotTask
    config:
    - connections.plotName: xFit_PSF
      stellarLocusFitDict:
        xMin: 1.05
        xMax: 1.55
        yMin: 0.78
        yMax: 1.62
        mHW: 13.35
        bHW: -15.54
      connections.catPlot: injected_objectTable_tract
      connections.colorColorFitPlot: injected_colorColorFitPlot_xFit_PSF
  plot_xFit_CModel:
    class: lsst.analysis.drp.colorColorFitPlot.ColorColorFitPlotTask
    config:
    - python: |
        config.fluxTypeForColor = "cModelFlux"
        config.setConfigDependencies()
      connections.plotName: xFit_CModel
      stellarLocusFitDict:
        xMin: 1.05
        xMax: 1.55
        yMin: 0.78
        yMax: 1.62
        mHW: 13.35
        bHW: -15.54
    - connections.catPlot: injected_objectTable_tract
      connections.colorColorFitPlot: injected_colorColorFitPlot_xFit_CModel
  plot_yFit_PSF:
    class: lsst.analysis.drp.colorColorFitPlot.ColorColorFitPlotTask
    config:
    - python: |
        config.bands = {"band1": "r", "band2": "i", "band3": "z"}
        config.setConfigDependencies()
      connections.plotName: yFit_PSF
      axisActions.magAction.column: i_psfFlux
      stellarLocusFitDict:
        xMin: 0.82
        xMax: 2.01
        yMin: 0.37
        yMax: 0.9
        mHW: 0.4
        bHW: 0.03
      xLims: (-0.8, 3.2)
      yLims: (-0.5, 1.4)
    - connections.catPlot: injected_objectTable_tract
      connections.colorColorFitPlot: injected_colorColorFitPlot_yFit_PSF
  plot_yFit_CModel:
    class: lsst.analysis.drp.colorColorFitPlot.ColorColorFitPlotTask
    config:
    - python: |
        config.fluxTypeForColor = "cModelFlux"
        config.bands = {"band1": "r", "band2": "i", "band3": "z"}
        config.setConfigDependencies()
      connections.plotName: yFit_CModel
      stellarLocusFitDict:
        xMin: 0.82
        xMax: 2.01
        yMin: 0.37
        yMax: 0.9
        mHW: 0.4
        bHW: 0.03
      xLims: (-0.8, 3.2)
      yLims: (-0.5, 1.4)
    - connections.catPlot: injected_objectTable_tract
      connections.colorColorFitPlot: injected_colorColorFitPlot_yFit_CModel
  match_astromRefCat_objectTable:
    class: lsst.analysis.drp.catalogMatch.CatalogMatchTask
    config:
    - connections.catalog: injected_objectTable_tract
      connections.matchCatalog: injected_objectTable_tract_astrometryRefCat_match
contracts:
- contract: '''calib_psf_candidate'' not in measure.propagateFlags.source_flags if
    makeWarp.useVisitSummaryPsf else True'
- contract: '''calib_psf_reserved'' not in measure.propagateFlags.source_flags if
    makeWarp.useVisitSummaryPsf else True'
- contract: '''calib_psf_used'' not in measure.propagateFlags.source_flags if makeWarp.useVisitSummaryPsf
    else True'
- contract: consolidateHealSparsePropertyMaps.property_maps == healSparsePropertyMaps.property_maps
- contract: detectAndMeasureDiaSources.connections.subtractedMeasuredExposure == forcedPhotDiffim.connections.exposure
- contract: detectAndMeasureDiaSources.connections.subtractedMeasuredExposure == transformDiaSourceCat.connections.diffIm
- contract: drpAssociation.connections.assocDiaSourceTable == drpDiaCalculation.connections.assocDiaSourceTable
- contract: drpAssociation.connections.diaObjectTable == drpDiaCalculation.connections.diaObjectTable
- contract: forcedPhotDiffim.connections.refCat == forcedPhotCcd.connections.refCat
- contract: getTemplate.connections.template == subtractImages.connections.template
- contract: makeWarp.matchingKernelSize == assembleCoadd.matchingKernelSize
- contract: makeWarp.warpAndPsfMatch.warp.cacheSize == assembleCoadd.coaddPsf.cacheSize
- contract: selectGoodSeeingVisits.connections.goodVisits == templateGen.connections.selectedVisits
- contract: subtractImages.connections.difference == detectAndMeasureDiaSources.connections.difference
- contract: subtractImages.connections.matchedTemplate == detectAndMeasureDiaSources.connections.matchedTemplate
- contract: templateGen.connections.coaddExposure == getTemplate.connections.coaddExposures
- contract: transformDiaSourceCat.connections.diaSourceTable == consolidateDiaSourceTable.connections.inputCatalogs
- contract: transformDiaSourceCat.connections.diaSourceTable == drpAssociation.connections.diaSourceTables
subsets:
  processCcd:
    subset:
    - characterizeImage
    - inject_visit
    - calibrate
    - isr
    description: 'Set of tasks to run when doing single frame processing, without
      any conversions to Parquet/DataFrames or visit-level summaries.

      '
  coaddition:
    subset:
    - makeWarp
    - assembleCoadd
    - healSparsePropertyMaps
    description: 'A set of tasks to run when coadding images.

      '
  multiband:
    subset:
    - measure
    - deblend
    - mergeDetections
    - forcedPhotCoadd
    - mergeMeasurements
    - detection
    description: 'A set of tasks to run when making measurements on coadds.

      '
  objectTable:
    subset:
    - consolidateObjectTable
    - transformObjectTable
    - writeObjectTable
    description: 'A set of tasks to transform multiband outputs into a parquet object
      table.

      '
  forced:
    subset:
    - forcedPhotCoadd
    - forcedPhotCcd
    description: 'A set of tasks to run when doing forced measurements.

      '
  diffimDRP:
    subset:
    - templateGen
    - drpAssociation
    - selectGoodSeeingVisits
    - drpDiaCalculation
    - transformDiaSourceCat
    - forcedPhotCcdOnDiaObjects
    - forcedPhotDiffOnDiaObjects
    - subtractImages
    - consolidateDiaSourceTable
    - forcedPhotDiffim
    - detectAndMeasureDiaSources
    - getTemplate
    description: 'Subset for running image differencing branch of the DRP pipeline

      '
  preSourceTable:
    subset:
    - writePreSourceTable
    - transformPreSourceTable
    - consolidatePreSourceTable
    description: 'Set of tasks to generate parquet PreSource Tables, from single-visit
      processing steps only.

      '
  sourceTable:
    subset:
    - writeRecalibratedSourceTable
    description: 'Set of tasks to generate parquet Source Tables, using final calibrations.

      '
  step0:
    subset:
    - isrForCrosstalkSources
    description: |
      Tasks which should be run once, prior to initial data processing.

      This step generates crosstalk sources for ISR/inter-chip crosstalk by
      applying overscan correction on raw frames. A new dataset is written,
      which should be used as an input for further data processing.
  step1:
    subset:
    - characterizeImage
    - calibrate
    - inject_visit
    - transformPreSourceTable
    - isr
    - writePreSourceTable
    description: |
      Per-detector tasks that can be run together to start the DRP pipeline.

      These should never be run with 'tract' or 'patch' as part of the data ID
      expression if any later steps will also be run, because downstream steps
      require full visits and 'tract' and 'patch' constraints will always
      select partial visits that overlap that region.
  step2a:
    subset:
    - consolidatePreSourceTable
    - isolatedStarAssociation
    - consolidateVisitSummary
    description: |
      Global tasks: This is a mix of visit-level and tract-level tasks that
      must be run with a skymap data query constraint only (an instrument
      constraint is fine, but generally unneccessary).  For example, running
      with 'tract' (and 'patch') constraints will select partial visits that
      overlap that region.  A skymap constraint is necessary to prevent
      isolatedStarAssociation from producing results for all skymaps in the
      data repository. This only works with small to medium jobs.
      The isolatedStarAssociation task uses PreSources, generated by
      consolidatePreSourceTable, for all visits that overlap a tract.

      Visit-level: consolidatePreSourceTable, consolidateVisitSummary
      Tract-level: isolatedStarAssociation
  step2b:
    subset: []
    description: |
      Tract-level tasks
      Allowed data query constraints: tract

      Jointcal uses PreSources, generated by consolidatePreSourceTable,
      for all visits that overlap a tract. It also produces solutions
      per-tract, per-visit.
  step2d:
    subset:
    - writeRecalibratedSourceTable
    - finalizeCharacterization
    - consolidateSourceTable
    - updateVisitSummary
    - transformSourceTable
    description: |
      Visit-level tasks.
      Allowed data query constraints: visit

      writeRecalibratedSourceTable, transformSourceTable run per-detector
      consolidateSourceTable produces one data product per visit.
      finalizeCharacterization will eventually model full focal plane PSFs.
  step2e:
    subset:
    - makeVisitTable
    - makeCcdVisitTable
    description: |
      Global-level tasks that must not be run with any data query constraints
      Can be run anytime after subset step2d.

      Allowed data query constraints: instrument

      Tasks generate one data product per collection.
      make[Ccd]VisitTable produces per-collection summary of the Visits
      and CcdVisits.
  step3:
    subset:
    - selectDeepCoaddVisits
    - templateGen
    - transformObjectTable
    - measure
    - deblend
    - writeObjectTable
    - assembleCoadd
    - mergeDetections
    - forcedPhotCoadd
    - mergeMeasurements
    - makeWarp
    - selectGoodSeeingVisits
    - consolidateObjectTable
    - detection
    description: |
      Tract-level tasks that can be run together, but only after the 'step1'
      and 'step2' subsets.

      These should be run with explicit 'tract' constraints essentially all the
      time, because otherwise quanta will be created for jobs with only partial visit
      coverage.
  analysis_visit_plots:
    subset:
    - plot_e2PSF_sky_visit
    - plot_E2Diff_sky_visit
    - plot_e2_scatter_visit
    - plot_astromRefCat_scatter_visit_dDec
    - plot_e1_scatter_visit
    - plot_ShapeDiff_sky_visit
    - plot_e1PSF_sky_visit
    - plot_shapeSizeFractionalDiff_scatter_visit
    - plot_e1_sky_visit
    - plot_e2_sky_visit
    - plot_shapeSizeDiff_scatter_visit
    - plot_astromRefCat_sky_visit_dDec
    - plot_CircAp25_sub_PSF_all_scatter_visit
    - plot_shapeSize_sky_visit
    - plot_PSFluxSN_meas_sky_all_visit
    - plot_CircAp25_sub_PSF_meas_scatter_visit
    - plot_shapeSize_scatter_visit
    - plot_astromRefCat_sky_visit_dRA
    - plot_E1Diff_scatter_visit
    - plot_skyObject_sky_visit
    - plot_ellipResids_quiver_visit
    - plot_CircAp25_sub_PSF_gals_scatter_visit
    - plot_shapeSizePSF_scatter_visit
    - plot_CircAp12_sub_PSF_meas_sky_stars_visit
    - plot_E1Diff_sky_visit
    - plot_e2PSF_scatter_visit
    - plot_CircAp12_sub_PSF_meas_sky_gals_visit
    - plot_RhoStatistics_visit
    - match_astromRefCat_visit
    - plot_astromRefCat_scatter_visit_dRA
    - plot_CircAp12_sub_PSF_meas_calib_psf_used_scatter_visit
    - plot_shapeSizePSF_sky_visit
    - plot_CircAp12_sub_PSF_gals_scatter_visit
    - plot_e1PSF_scatter_visit
    - plot_E2Diff_scatter_visit
    - plot_CircAp12_sub_PSF_meas_calib_psf_used_sky_gals_visit
    - plot_CircAp12_sub_PSF_meas_calib_psf_used_sky_stars_visit
    - plot_CircAp12_sub_PSF_all_scatter_visit
    - plot_CircAp12_sub_PSF_meas_scatter_visit
    - plot_CircAp12_sub_PSF_calib_psf_used_sky_unknown_visit
  analysis_coadd_plots:
    subset:
    - plot_E2Diff_magDiff_scatter
    - plot_yFit_PSF
    - plot_astromRefCat_sky_tract_dDec
    - plot_wFit_CModel
    - plot_shapeSizeFractionalDiff_sky
    - plot_CircAp12_sub_PSF_meas_calib_psf_used_all_scatter
    - plot_astromRefCat_sky_tract_dRA
    - plot_RhoStatistics
    - plot_astromRefCat_scatter_tract_dDec
    - plot_wFit_PSF
    - match_astromRefCat_objectTable
    - plot_iz_ri_psf
    - plot_xFit_PSF
    - plot_ri_gr_psf
    - plot_CircAp12_sub_PSF_meas_sky_gals
    - plot_E2Diff_sky
    - plot_CModel_sub_PSFmag_meas_sky_galaxies
    - histPlot_skyObject
    - plot_CircAp12_sub_PSF_meas_sky_stars
    - plot_CircAp12_sub_PSF_meas_gals_scatter
    - plot_E2Diff_scatter
    - plot_shapeSizeFractionalDiff_magDiff_scatter
    - plot_shapeSizeFractionalDiff_scatter
    - plot_CircAp12_sub_PSF_meas_stars_scatter
    - plot_PSFFluxSN_meas_sky_all
    - plot_xFit_CModel
    - plot_ri_gr_cmodel
    - plot_astromRefCat_scatter_tract_dRA
    - plot_E1Diff_scatter
    - plot_yFit_CModel
    - skyPlot_skyObject
    - plot_E1Diff_sky
    - plot_CircAp12_sub_PSF_meas_calib_psf_used_sky_all
    - plot_CModel_sub_PSFmag_meas_sky_stars
    - plot_E1Diff_magDiff_scatter
  injected_processCcd:
    subset:
    - inject_visit
    description: All tasks from the 'processCcd' subset impacted by source injection.
  injected_coaddition:
    subset:
    - makeWarp
    - assembleCoadd
    - healSparsePropertyMaps
    description: All tasks from the 'coaddition' subset impacted by source injection.
  injected_multiband:
    subset:
    - measure
    - deblend
    - mergeDetections
    - forcedPhotCoadd
    - mergeMeasurements
    - detection
    description: All tasks from the 'multiband' subset impacted by source injection.
  injected_objectTable:
    subset:
    - consolidateObjectTable
    - transformObjectTable
    - writeObjectTable
    description: All tasks from the 'objectTable' subset impacted by source injection.
  injected_forced:
    subset:
    - forcedPhotCoadd
    - forcedPhotCcd
    description: All tasks from the 'forced' subset impacted by source injection.
  injected_diffimDRP:
    subset:
    - templateGen
    - drpAssociation
    - drpDiaCalculation
    - detectAndMeasureDiaSources
    - transformDiaSourceCat
    - forcedPhotCcdOnDiaObjects
    - forcedPhotDiffOnDiaObjects
    - subtractImages
    - consolidateDiaSourceTable
    - forcedPhotDiffim
    - selectGoodSeeingVisits
    - getTemplate
    description: All tasks from the 'diffimDRP' subset impacted by source injection.
  injected_sourceTable:
    subset:
    - writeRecalibratedSourceTable
    description: All tasks from the 'sourceTable' subset impacted by source injection.
  injected_step1:
    subset:
    - inject_visit
    description: All tasks from the 'step1' subset impacted by source injection.
  injected_step2a:
    subset:
    - consolidateVisitSummary
    description: All tasks from the 'step2a' subset impacted by source injection.
  injected_step2d:
    subset:
    - writeRecalibratedSourceTable
    - finalizeCharacterization
    - consolidateSourceTable
    - updateVisitSummary
    - transformSourceTable
    description: All tasks from the 'step2d' subset impacted by source injection.
  injected_step2e:
    subset:
    - makeVisitTable
    - makeCcdVisitTable
    description: All tasks from the 'step2e' subset impacted by source injection.
  injected_step3:
    subset:
    - selectDeepCoaddVisits
    - templateGen
    - transformObjectTable
    - measure
    - deblend
    - writeObjectTable
    - assembleCoadd
    - mergeDetections
    - forcedPhotCoadd
    - mergeMeasurements
    - makeWarp
    - selectGoodSeeingVisits
    - consolidateObjectTable
    - detection
    description: All tasks from the 'step3' subset impacted by source injection.
  injected_analysis_visit_plots:
    subset:
    - plot_e2PSF_sky_visit
    - plot_E2Diff_sky_visit
    - plot_e2_scatter_visit
    - plot_astromRefCat_scatter_visit_dDec
    - plot_e1_scatter_visit
    - plot_ShapeDiff_sky_visit
    - plot_e1PSF_sky_visit
    - plot_shapeSizeFractionalDiff_scatter_visit
    - plot_e2_sky_visit
    - plot_e1_sky_visit
    - plot_shapeSizeDiff_scatter_visit
    - plot_astromRefCat_sky_visit_dDec
    - plot_CircAp25_sub_PSF_all_scatter_visit
    - plot_shapeSize_sky_visit
    - plot_PSFluxSN_meas_sky_all_visit
    - plot_CircAp25_sub_PSF_meas_scatter_visit
    - plot_shapeSize_scatter_visit
    - plot_astromRefCat_sky_visit_dRA
    - plot_E1Diff_scatter_visit
    - plot_skyObject_sky_visit
    - plot_ellipResids_quiver_visit
    - plot_CircAp25_sub_PSF_gals_scatter_visit
    - plot_shapeSizePSF_scatter_visit
    - plot_CircAp12_sub_PSF_meas_sky_stars_visit
    - plot_E1Diff_sky_visit
    - plot_e2PSF_scatter_visit
    - plot_CircAp12_sub_PSF_meas_sky_gals_visit
    - plot_RhoStatistics_visit
    - match_astromRefCat_visit
    - plot_astromRefCat_scatter_visit_dRA
    - plot_CircAp12_sub_PSF_meas_calib_psf_used_scatter_visit
    - plot_shapeSizePSF_sky_visit
    - plot_CircAp12_sub_PSF_gals_scatter_visit
    - plot_e1PSF_scatter_visit
    - plot_E2Diff_scatter_visit
    - plot_CircAp12_sub_PSF_meas_calib_psf_used_sky_gals_visit
    - plot_CircAp12_sub_PSF_meas_calib_psf_used_sky_stars_visit
    - plot_CircAp12_sub_PSF_all_scatter_visit
    - plot_CircAp12_sub_PSF_meas_scatter_visit
    - plot_CircAp12_sub_PSF_calib_psf_used_sky_unknown_visit
    description: All tasks from the 'analysis_visit_plots' subset impacted by source
      injection.
  injected_analysis_coadd_plots:
    subset:
    - plot_E2Diff_magDiff_scatter
    - plot_yFit_PSF
    - plot_astromRefCat_sky_tract_dDec
    - plot_wFit_CModel
    - plot_shapeSizeFractionalDiff_sky
    - plot_CircAp12_sub_PSF_meas_calib_psf_used_all_scatter
    - plot_astromRefCat_sky_tract_dRA
    - plot_RhoStatistics
    - plot_astromRefCat_scatter_tract_dDec
    - plot_wFit_PSF
    - match_astromRefCat_objectTable
    - plot_iz_ri_psf
    - plot_xFit_PSF
    - plot_ri_gr_psf
    - plot_CircAp12_sub_PSF_meas_sky_gals
    - plot_E2Diff_sky
    - plot_CModel_sub_PSFmag_meas_sky_galaxies
    - histPlot_skyObject
    - plot_CircAp12_sub_PSF_meas_sky_stars
    - plot_E2Diff_scatter
    - plot_shapeSizeFractionalDiff_magDiff_scatter
    - plot_shapeSizeFractionalDiff_scatter
    - plot_CircAp12_sub_PSF_meas_stars_scatter
    - plot_PSFFluxSN_meas_sky_all
    - plot_E1Diff_magDiff_scatter
    - plot_xFit_CModel
    - plot_ri_gr_cmodel
    - plot_astromRefCat_scatter_tract_dRA
    - plot_E1Diff_scatter
    - plot_yFit_CModel
    - skyPlot_skyObject
    - plot_E1Diff_sky
    - plot_CircAp12_sub_PSF_meas_calib_psf_used_sky_all
    - plot_CModel_sub_PSFmag_meas_sky_stars
    - plot_CircAp12_sub_PSF_meas_gals_scatter
    description: All tasks from the 'analysis_coadd_plots' subset impacted by source
      injection.
